<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>啊雷雷&amp;啊玉玉</title>
  
  <subtitle>越努力，越幸运</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-07-16T06:32:51.168Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>CLX</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux网络属性配置</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/Linux%E7%BD%91%E7%BB%9C%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/Linux基础/Linux网络属性配置/</id>
    <published>2020-07-16T03:39:47.000Z</published>
    <updated>2020-07-16T06:32:51.168Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>sed</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/sed/"/>
    <id>http://yoursite.com/Linux基础/sed/</id>
    <published>2020-07-15T09:03:15.000Z</published>
    <updated>2020-07-16T03:39:53.971Z</updated>
    
    <content type="html"><![CDATA[<h1 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h1><blockquote><p>文本处理三剑客：</p><p>文本过滤：grep，egrep，fgrep</p><p>流编辑器，行：sed</p><p>文本格式化工具，报告生成器</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sed [OPTION]... <span class="string">'script'</span> [input-file] ...</span><br><span class="line">script：地址定界编辑命令</span><br><span class="line">常用选项：</span><br><span class="line">-n：不输出模式空间中的内容至屏幕</span><br><span class="line">-e script，--expression=script：多点编辑</span><br><span class="line">-f /PATH/TO/SED_SCRIPT_FILE：每行一个编辑命令</span><br><span class="line">-r，--regexp-extended：支持使用扩展正则表达式</span><br><span class="line">-i[SUFFIX],--<span class="keyword">in</span>-place[=SUFFIX]：直接编辑源文件</span><br></pre></td></tr></table></figure><h3 id="地址定界"><a href="#地址定界" class="headerlink" title="地址定界"></a>地址定界</h3><ol><li><p>空地址：对全文进行处理</p></li><li><p>单地址：</p><ol><li>#：指定行</li><li>/pattern/：被模式所匹配到的每一行</li></ol></li><li><p>地址范围：#.#；#,+#；#,/pat1/；/pat1/,/pat2/；$最后一行</p></li><li><p>步进：1-2所有奇数行；2-2所有偶数行</p></li></ol><h3 id="编辑命令"><a href="#编辑命令" class="headerlink" title="编辑命令"></a>编辑命令</h3><p>d：删除</p><p>p：显示模式空间中的内容</p><p>a \text：在行后面追加文本“text”，支持使用\n实现多行追加</p><p>i \text：在行前面插入文本“text”，支持使用\n实现多行插入</p><p>c \text：把匹配到的行替换为此处指定的文本“text”</p><p>w /PATH/TO/SOMEFILE：保存模式空间匹配到的行至指定的文件中</p><p>r /PATH/FROM/SOMEFILE：读取指定文件的内容至当前文件被模式匹配到的行后面；文件合并；</p><p>=：为模式匹配到的行打印行号</p><p>!：条件取反：地址定界!编辑命令；</p><p>s///：查找替换，其分隔符可自行指定，常用的s@@@，s###等</p><p>​        替换标记：</p><p>​                g：全局替换</p><p>​                w /PATH/TO/SOMEFILE：将替换成功的结果保存至指定文件中</p><p>​                p：显示替换成功的行</p><h2 id="高级编辑命令"><a href="#高级编辑命令" class="headerlink" title="高级编辑命令"></a>高级编辑命令</h2><p>h：把<strong>模式</strong>空间中的内容<strong>覆盖</strong>至<strong>保持</strong>空间中</p><p>H：把<strong>模式</strong>空间中的内容<strong>追加</strong>至<strong>保持</strong>空间中</p><p>g：把<strong>保持</strong>空间中的内容<strong>覆盖</strong>至<strong>模式</strong>空间中</p><p>G：把<strong>保持</strong>空间中的内容<strong>追加</strong>至<strong>模式</strong>空间中</p><p>x：把<strong>模式</strong>空间中的内容与<strong>保持</strong>空间中的<strong>内容互换</strong></p><p>n：覆盖读取匹配到的行的下一行至模式空间中</p><p>N：追加读取匹配到的行的下一行至模式空间中</p><p>d：删除模式空间中的行</p><p>D：删除多行模式空间中的所有行</p><p>示例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'n;p'</span> FILE：显示偶数行</span><br><span class="line">sed <span class="string">'1!G;h;$!d'</span> FILE：逆序显示文件的内容</span><br><span class="line">sed <span class="string">'$!d'</span> FILE：取出最后一行</span><br><span class="line">sed <span class="string">'$!N;$!D'</span> FILE：取出文件后两行</span><br><span class="line">sed <span class="string">'/^$/d;G'</span> FILE：删除原有的所有空白行，而后为所有的非空白行后添加一个空白行</span><br><span class="line">sed <span class="string">'n;d'</span> FILE：显示奇数行</span><br><span class="line">sed <span class="string">'G'</span> FILE：在原有的每行后方添加一个空白行</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;sed命令&quot;&gt;&lt;a href=&quot;#sed命令&quot; class=&quot;headerlink&quot; title=&quot;sed命令&quot;&gt;&lt;/a&gt;sed命令&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;文本处理三剑客：&lt;/p&gt;
&lt;p&gt;文本过滤：grep，egrep，fgrep&lt;/p&gt;
&lt;p&gt;
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>yum工具</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/yum%E5%B7%A5%E5%85%B7/"/>
    <id>http://yoursite.com/Linux基础/yum工具/</id>
    <published>2020-07-06T07:02:10.000Z</published>
    <updated>2020-07-15T08:36:33.002Z</updated>
    
    <content type="html"><![CDATA[<h1 id="YUM"><a href="#YUM" class="headerlink" title="YUM"></a>YUM</h1><p><em>yum:yellow dog,Yellowdog Update Modifier</em></p><p>yum repository：yum repo，存储了众多rpm包，以及相关的元数据文件（放置于特定目录下：repodata）</p><h2 id="yum客户端"><a href="#yum客户端" class="headerlink" title="yum客户端"></a>yum客户端</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><blockquote><p>/etc/yum.comf：为所有仓库提供公共配置</p><p>/etc/yum.repos.d/*.repo：为仓库的指向提供配置</p></blockquote><h3 id="仓库的定义"><a href="#仓库的定义" class="headerlink" title="仓库的定义"></a>仓库的定义</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[repositoryID]</span><br><span class="line">name=Some name <span class="keyword">for</span> this repository</span><br><span class="line">baseurl=url://path/to/repository</span><br><span class="line">enabled=&#123;1|0&#125;</span><br><span class="line">gpgcheck=&#123;1|0&#125;</span><br><span class="line">gpgkey=URL</span><br><span class="line">enablegroups=&#123;1|0&#125;</span><br><span class="line">failovermethod=&#123;roundrobin|priority&#125;   <span class="comment">#默认为：roundrobin，意为随机挑选</span></span><br><span class="line">cost=   <span class="comment">#默认为1000</span></span><br></pre></td></tr></table></figure><h3 id="yum命令的用法"><a href="#yum命令的用法" class="headerlink" title="yum命令的用法"></a>yum命令的用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">yum [options] [<span class="built_in">command</span>] [package ...]</span><br><span class="line">        * install package1 [package2] [...]</span><br><span class="line">        * update [package1] [package2] [...]</span><br><span class="line">        * update-to [package1] [package2] [...]</span><br><span class="line">        * update-minimal [package1] [package2] [...]</span><br><span class="line">        * check-update</span><br><span class="line">        * upgrade [package1] [package2] [...]</span><br><span class="line">        * upgrade-to [package1] [package2] [...]</span><br><span class="line">        * distribution-synchronization [package1] [package2] [...]</span><br><span class="line">        * remove | erase package1 [package2] [...]</span><br><span class="line">        * autoremove [package1] [...]</span><br><span class="line">        * list [...]</span><br><span class="line">        * info [...]</span><br><span class="line">        * provides | whatprovides feature1 [feature2] [...]</span><br><span class="line">        * clean [ packages | metadata | expire-cache | rpmdb | plugins | all ]</span><br><span class="line">        * makecache [fast]</span><br><span class="line">        * groups [...]</span><br><span class="line">        * search string1 [string2] [...]</span><br><span class="line">        * shell [filename]</span><br><span class="line">        * resolvedep dep1 [dep2] [...]</span><br><span class="line">           (maintained <span class="keyword">for</span> legacy reasons only - use repoquery or yum provides)</span><br><span class="line">        * localinstall rpmfile1 [rpmfile2] [...]</span><br><span class="line">           (maintained <span class="keyword">for</span> legacy reasons only - use install)</span><br><span class="line">        * localupdate rpmfile1 [rpmfile2] [...]</span><br><span class="line">           (maintained <span class="keyword">for</span> legacy reasons only - use update)</span><br><span class="line">        * reinstall package1 [package2] [...]</span><br><span class="line">        * downgrade package1 [package2] [...]</span><br><span class="line">        * deplist package1 [package2] [...]</span><br><span class="line">        * repolist [all|enabled|disabled]</span><br><span class="line">        * repoinfo [all|enabled|disabled]</span><br><span class="line">        * repository-packages &lt;enabled-repoid&gt; &lt;install|remove|remove-or-reinstall|remove-or-distribution-synchronization&gt; [package2] [...]</span><br><span class="line">        * version [ all | installed | available | group-* | nogroups* | grouplist | groupinfo ]</span><br><span class="line">        * <span class="built_in">history</span> [info|list|packages-list|packages-info|summary|addon-info|redo|undo|rollback|new|sync|stats]</span><br><span class="line">        * load-transaction [txfile]</span><br><span class="line">        * updateinfo [summary | list | info | remove-pkgs-ts | exclude-updates | exclude-all | check-running-kernel]</span><br><span class="line">        * fssnapshot [summary | list | have-space | create | delete]</span><br><span class="line">        * fs [filters | refilter | refilter-cleanup | du]</span><br><span class="line">        * check</span><br><span class="line">        * <span class="built_in">help</span> [<span class="built_in">command</span>]</span><br><span class="line">显示仓库列表</span><br><span class="line">repolist [all|<span class="built_in">enable</span>|<span class="built_in">disable</span>]</span><br><span class="line">显示程序包</span><br><span class="line">list</span><br><span class="line">yum list [all|glob_exp1] [glob_exp2] [...]</span><br><span class="line">yum list &#123;available|installed|updates&#125; [glob_exp1] [...]</span><br><span class="line">安装程序包</span><br><span class="line">install package1 [package2] [...]</span><br><span class="line">reinstall package1 [package2] [...]（重新安装）</span><br><span class="line">升级程序包</span><br><span class="line">update [package] [package2] [...]</span><br><span class="line">downgrade [package] [package2] [...]（降级）</span><br><span class="line">卸载程序包</span><br><span class="line">remove | erase package1 [package2] [...]</span><br><span class="line">查看程序包information</span><br><span class="line">info [...]</span><br><span class="line">查看指定的特性（可以是某文件）是由哪个程序所提供</span><br><span class="line">provides|whatprovides feature1 [feature2] [...]</span><br><span class="line">清理本地缓存</span><br><span class="line">clean [packages|metadata|expire-cache|rpmdb|plugins|all]</span><br><span class="line">构建缓存</span><br><span class="line">makecache</span><br><span class="line">搜索</span><br><span class="line">search string1 [string2] [...]   以指定的关键字搜索程序包名及summary信息</span><br><span class="line">查看指定包所依赖的capabilities</span><br><span class="line">deplist package1 [package2] [...]</span><br><span class="line">查看yum事务历史</span><br><span class="line"><span class="built_in">history</span> [info|list|packages-list|packages-info|summary|addon-info|redo|undo|rollback|new|sync|stats]</span><br><span class="line">安装及升级本地程序包</span><br><span class="line"> * localinstall rpmfile1 [rpmfile2] [...]</span><br><span class="line">           (maintained <span class="keyword">for</span> legacy reasons only - use install)</span><br><span class="line"> * localupdate rpmfile1 [rpmfile2] [...]</span><br><span class="line">           (maintained <span class="keyword">for</span> legacy reasons only - use update)</span><br><span class="line">包组管理的相关命令</span><br><span class="line">groupinstall group1 [group2] [...]</span><br><span class="line">groupupdate group1 [group2] [...]</span><br><span class="line">grouplist [hidden] [groupwildcard] [...]</span><br><span class="line">groupremove group1 [group2] [...]</span><br><span class="line">groupinfo group1 [...]</span><br></pre></td></tr></table></figure><h3 id="如何适用光盘当作本地yum仓库"><a href="#如何适用光盘当作本地yum仓库" class="headerlink" title="如何适用光盘当作本地yum仓库"></a>如何适用光盘当作本地yum仓库</h3><ol><li>挂载光盘至某目录，例如/media/cdrom #mount -r -t iso9600 /dev/cdrom /media/cdrom</li><li>创建配置文件</li></ol><h3 id="yum的命令行选项"><a href="#yum的命令行选项" class="headerlink" title="yum的命令行选项"></a>yum的命令行选项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">--nogpgcheck：禁止进行gpg check</span><br><span class="line">-y：自动回答为“yes”</span><br><span class="line">-q：静默模式</span><br><span class="line">--disablerepo=repoidglob：临时禁用此处指定的repo</span><br><span class="line">--enablerepo=repoidglob：临时启用此处指定的repo</span><br><span class="line">--noplugins：禁用所有插件</span><br></pre></td></tr></table></figure><h3 id="yum的repo配置文件中可用的变量"><a href="#yum的repo配置文件中可用的变量" class="headerlink" title="yum的repo配置文件中可用的变量"></a>yum的repo配置文件中可用的变量</h3><p>$releasever：当前os的发行版的主版本号</p><p>$arch：平台</p><p>$basearch：基础平台</p><p>$YUM0-$YUM9</p><p><a href="http://mirrors.aliyun.com/centos/$releasever/$basearch/os" target="_blank" rel="noopener">http://mirrors.aliyun.com/centos/$releasever/$basearch/os</a></p><h3 id="创建yum仓库"><a href="#创建yum仓库" class="headerlink" title="创建yum仓库"></a>创建yum仓库</h3><blockquote><p>createrepo [options] &lt;directory&gt;</p></blockquote><h3 id="程序包编译安装"><a href="#程序包编译安装" class="headerlink" title="程序包编译安装"></a>程序包编译安装</h3><p>testapp-VERSION-release.src.rpm –&gt; 安装后，使用rpmbuild命令制作成二进制格式的rpm包，而后再安装</p><p>源代码–&gt;预处理–&gt;编译（gcc）–&gt;汇编–&gt;链接–&gt;执行</p><p><strong>源代码组织格式：</strong></p><p>多文件：文件中的代码之间，很可能存在跨文件依赖关系</p><p>c、c++：make（configure–&gt;Makefile.in–&gt;makefile）</p><p>java：maven</p><p><strong>编译安装三步骤：</strong></p><p>./configure</p><ol><li>通过选项传递参数，指定启用特性、安装路径等，执行时会参考用户的指定以及Makefile.in文件生成makefile</li><li>检查依赖到的外部环境</li></ol><p>make</p><p>根据makefile文件，构建应用程序</p><p>make install</p><p><strong>开发工具</strong></p><p>autoconf：生成configure脚本</p><p>automake：生成Makefile.in</p><h3 id="编译C源代码"><a href="#编译C源代码" class="headerlink" title="编译C源代码"></a>编译C源代码</h3><p>前提：提供开发工具及开发环境</p><p>开发工具make，gcc等</p><p>开发环境：开发库，头文件</p><p>glibc：标准库</p><p>通过“包组”提供开发组件，Development Tools，Server Platform Development</p><h4 id="第一步：configure脚本"><a href="#第一步：configure脚本" class="headerlink" title="第一步：configure脚本"></a>第一步：configure脚本</h4><p>选项：指定安装位置、指定启用的特性</p><p>–help：获取其支持使用的选项</p><p>选项分类：</p><ul><li><p>安装路径设定</p><ul><li>–prefix=/PATH/TO/SOMEWHERE：指定安装位置，默认为/usr/local/</li><li>–sysconfdir=/PATH/TO/SOMEWHERE：配置文件安装位置</li></ul></li><li><p>System types</p></li><li><p>Optional Features：可选特性</p><ul><li>–disable-FEATURE</li><li>–enable-FEATURE[=ARG]</li></ul></li><li><p>Optional Packages：可选包</p><ul><li>–with-PACKAGE[=ARG]</li><li>–without-PACKAGE</li></ul></li></ul><h4 id="第二步：make"><a href="#第二步：make" class="headerlink" title="第二步：make"></a>第二步：make</h4><h4 id="第三步：make-install"><a href="#第三步：make-install" class="headerlink" title="第三步：make install"></a>第三步：make install</h4><h3 id="安装后的配置"><a href="#安装后的配置" class="headerlink" title="安装后的配置"></a>安装后的配置</h3><ol><li>导出二进制程序目录至PATH环境变量中：编辑/etc/profile.d/NAME.sh，export PATH=/PATH/TO/BIN:$PATH</li><li>导出库文件路径：编辑/etc/ld.so.conf.d/NAME.conf添加新的库文件所在目录至此文件中；让心态重新生成缓存ldconfig [-v]</li><li>导出头文件：基于链接的方式实现，ln -sv</li><li>导出帮助手册：编辑/etc/man.config文件，添加一个MANPATH</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;YUM&quot;&gt;&lt;a href=&quot;#YUM&quot; class=&quot;headerlink&quot; title=&quot;YUM&quot;&gt;&lt;/a&gt;YUM&lt;/h1&gt;&lt;p&gt;&lt;em&gt;yum:yellow dog,Yellowdog Update Modifier&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;yum repos
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux程序包管理</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/Linux%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/Linux基础/Linux程序包管理/</id>
    <published>2020-07-01T07:25:59.000Z</published>
    <updated>2020-07-06T06:55:31.389Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux程序包管理"><a href="#Linux程序包管理" class="headerlink" title="Linux程序包管理"></a>Linux程序包管理</h1><p>API：Application Program Interface</p><p>ABI：Application Binary Interface</p><h2 id="程序包管理器"><a href="#程序包管理器" class="headerlink" title="程序包管理器"></a>程序包管理器</h2><p>源代码–&gt;目标二进制格式–&gt;组织成为一个或有限几个“包“文件</p><p>安装、升级、卸载、查询、校验</p><h3 id="程序包管理器-1"><a href="#程序包管理器-1" class="headerlink" title="程序包管理器"></a>程序包管理器</h3><p>debian：dpt，dpkg，”.deb“</p><p>redhat：redhat package manager（rpm），”.rpm“</p><p>S.u.S.E：rpm，”.rpm“</p><p>Gentoo：ports</p><p>ArchLinux</p><h3 id="命名格式"><a href="#命名格式" class="headerlink" title="命名格式"></a>命名格式</h3><p>源代码：name-VERSION.tar.gz，VERSION：major.minor.release</p><p>rpm包命名格式：name-VERSION-release.arch.rpm，VERSION：major.minor.release</p><p>release.arch：rpm包的发行号</p><p>archetecture：i386，x64（amd64），ppc，noarch</p><h3 id="前端工具：自动解决依赖关系"><a href="#前端工具：自动解决依赖关系" class="headerlink" title="前端工具：自动解决依赖关系"></a>前端工具：自动解决依赖关系</h3><p>yum：rhel系列系统上rpm包管理器的前端工具</p><p>apt-get(apt-cache)：deb包管理器的前端工具</p><p>zypper：suse的rpm管理器前端工具</p><p>dnf：Fedora 22+系统上rpm包管理器的前端工具</p><h3 id="程序包管理器-2"><a href="#程序包管理器-2" class="headerlink" title="程序包管理器"></a>程序包管理器</h3><p><em>功能：将编译好的应用程序的各组成文件打包成一个或几个程序包文件，从而更方便的实现程序包的安装、升级、卸载、和查询等管理操作</em></p><ul><li><p>程序包的组成清单（每个程序包都单独实现）</p><ul><li>文件清单</li><li>安装或卸载时运行的脚本</li></ul></li><li><p>数据库（公共）</p><ul><li>程序包的名称和版本</li><li>依赖关系</li><li>功能说明</li><li>安装生成的各文件的文件路径及校验码信息</li><li>等等</li><li>/var/lib/rpm</li></ul></li></ul><h3 id="获取程序包的途径"><a href="#获取程序包的途径" class="headerlink" title="获取程序包的途径"></a>获取程序包的途径</h3><ol><li>系统发行版的光盘或官方的文件服务器（或镜像站点）</li><li>项目的官方站点</li><li>第三方组织</li></ol><h2 id="Centos系统上rpm命令管理程序包"><a href="#Centos系统上rpm命令管理程序包" class="headerlink" title="Centos系统上rpm命令管理程序包"></a>Centos系统上rpm命令管理程序包</h2><p>安装、升级、卸载、查询和校验、数据库维护</p><h3 id="rpm命令"><a href="#rpm命令" class="headerlink" title="rpm命令"></a>rpm命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpm [OPTIONS] [PACKAGE_FILE]</span><br><span class="line">安装：-i,--install</span><br><span class="line">升级：-U,--update,-F,--freshen</span><br><span class="line">卸载：-e,--erase</span><br><span class="line">查询：-q,--query</span><br><span class="line">校验：-V,--verify</span><br><span class="line">数据库维护：--builddb,--initdb</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;-i|--install&#125; [install-options] PACKAGE_FILE ...</span><br><span class="line">rpm -ivh PACKAGE_FILE ...</span><br><span class="line">GENERAL OPTIONS:</span><br><span class="line">-v:verbose,详细信息</span><br><span class="line">-vv：更详细的输出</span><br><span class="line">[install-options]:</span><br><span class="line">四类：--noscripts</span><br><span class="line">preinstall：安装过程开始之前运行的脚本，%pre，--nopre</span><br><span class="line">postinstall：安装过程完成之后运行的脚本，%post，--nopost</span><br><span class="line">preuninstall：卸载过程真正开始执行之前运行的脚本，%preun，--nopreun</span><br><span class="line">postuninstall：卸载过程完成之后运行的脚本，%postun，--nopostun</span><br><span class="line">--nosignature：不检查包签名信息，不检查来源合法性</span><br><span class="line">--nodigest：不检查包完整性信息</span><br></pre></td></tr></table></figure><h3 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;-U|--upgrade&#125; [install-options] PACKAGE_FILE ...</span><br><span class="line">rpm &#123;-F|--freshen&#125; [install-options] PACKAGE_FILE ...</span><br><span class="line">-U:升级或安装</span><br><span class="line">-F：升级</span><br><span class="line">rpm -Uvh PACKAGE_FILE ...</span><br><span class="line">rpm -Fvh PACKAGE_FILE ...</span><br><span class="line">--oldpackage:降级</span><br><span class="line">--force：强制升级</span><br></pre></td></tr></table></figure><p><strong>注意</strong></p><ul><li>不要对内核做升级操作；Linux支持多内核版本并存，因此，直接安装新版本内核</li><li>如果某原程序包的配置文件安装后曾被修改过，升级时，新版本的程序提供的同一个配置文件不会覆盖原有版本的配置文件，而是把新版本的配置文件重命名（FILENAME.rpmnew）后提供</li></ul><h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;-e|--erase&#125; [--allmatches] [--nodeps] [--noscripts] [--<span class="built_in">test</span>] PACKAGE_FILE ...</span><br><span class="line">--allmatches：卸载所有匹配指定名称的程序包的各版本</span><br><span class="line">--nodeps：忽略依赖关系</span><br><span class="line">--<span class="built_in">test</span>：测试卸载，dry run模式</span><br></pre></td></tr></table></figure><h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;-q|--qurey&#125; [select-options] [query-options]</span><br><span class="line">[select-options]</span><br><span class="line">PACKAGE_NAME：查询指定的程序包是否已经安装，极其版本</span><br><span class="line">-a，--all：查询所有已经安装过的包</span><br><span class="line">-f FILE：查询指定的文件由哪个程序包安装生成</span><br><span class="line">-p,--package PACKAGE_FILE：用于实现对未安装的程序包执行查询操作</span><br><span class="line">--whatprovides CAPABILITY：查询指定的CAPABILITY由哪个程序包提供</span><br><span class="line">--whatrequires CAPABILITY：查询指定的CAPABILITY被哪个包所依赖</span><br><span class="line">[query-options]</span><br><span class="line">--changelog：查询rpm包的changlog</span><br><span class="line">-l，--list：程序安装生成的所有文件列表</span><br><span class="line">-i，--info：程序包相关的信息，版本号、大小、所属的包组，等；</span><br><span class="line">-c，--configfiles：查询指定的程序包提供的配置文件</span><br><span class="line">-d，--docfiles：查询指定的程序包提供的文档</span><br><span class="line">--provides：列出指定的程序包提供的所有的CAPABILITY</span><br><span class="line">-R，--requires：查询指定的程序包的依赖关系</span><br><span class="line">--scripts：查看程序包自带的脚本片段</span><br><span class="line">用法：</span><br><span class="line">-q|PACKAGE, -qf FILE, -qc PACKAGE, -ql PACKAGE, -qd PACKAGE</span><br><span class="line">-qp| PACKAGE_FILE, -qpl PACKAGE_FILE, -qpc PACKAGE_FILE,...</span><br></pre></td></tr></table></figure><h3 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;-V|--verify&#125; [select-options] [verify-options]</span><br><span class="line">S file size differs</span><br><span class="line">M Mode differs (includes permissions and file <span class="built_in">type</span>)</span><br><span class="line">5 digest (formerly MD5 sum) differs</span><br><span class="line">D Device major/minor number mismatch</span><br><span class="line">L readLink(2) path mismatch</span><br><span class="line">U User ownership differs</span><br><span class="line">G Group ownership differs</span><br><span class="line">T mTime differs</span><br><span class="line">P caPabilities differ</span><br></pre></td></tr></table></figure><h2 id="包来源合法性验证和完整性验证"><a href="#包来源合法性验证和完整性验证" class="headerlink" title="包来源合法性验证和完整性验证"></a>包来源合法性验证和完整性验证</h2><h3 id="来源合法性验证"><a href="#来源合法性验证" class="headerlink" title="来源合法性验证"></a>来源合法性验证</h3><p>完整性验证：输入并导出信任的包制作者的密钥：</p><blockquote><p>对于centos发行版来说 ：rpm – import /etc/pkl/rpm-gpg/RPM-GPG-KEY-Centos-7</p></blockquote><p>验证：</p><ul><li>安装此组织签名的程序时，会自动执行验证</li><li>手动验证：rpm -K PACKAGE——FILE</li></ul><h2 id="数据库重建"><a href="#数据库重建" class="headerlink" title="数据库重建"></a>数据库重建</h2><p>rpm管理器数据库路径：/var/lib/rpm/</p><p>查询操作：通过此处的数据库进行</p><p>获取帮助</p><blockquote><p>Centos7 ：man rpmdb</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm &#123;--initdb|--rebuilddb&#125; [--dbpath DIRECTORY] [--root DIRECTORY]</span><br><span class="line">--initdb：初始化数据库，当前无任何数据库可初始化创建一个新的，当前有数据库时不执行任何操作</span><br><span class="line">--rebuilddb：重新构建，通过读取当前系统上所有已经安装过的程序包进行重新创建</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux程序包管理&quot;&gt;&lt;a href=&quot;#Linux程序包管理&quot; class=&quot;headerlink&quot; title=&quot;Linux程序包管理&quot;&gt;&lt;/a&gt;Linux程序包管理&lt;/h1&gt;&lt;p&gt;API：Application Program Interface&lt;/p&gt;

      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux任务计划</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/Linux%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92/"/>
    <id>http://yoursite.com/Linux基础/Linux任务计划/</id>
    <published>2020-06-30T08:29:38.000Z</published>
    <updated>2020-07-01T07:22:22.283Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux任务计划、周期性执"><a href="#Linux任务计划、周期性执" class="headerlink" title="Linux任务计划、周期性执"></a>Linux任务计划、周期性执</h1><p>未来的某时间点执行一次某任务：at batch</p><p>周期性运行某任务crontab</p><p>​    执行结果会通过邮件发送给用户</p><blockquote><p>netstat -tnlp 检查本地邮件服务是否开启</p></blockquote><h2 id="本地电子邮件服务"><a href="#本地电子邮件服务" class="headerlink" title="本地电子邮件服务"></a>本地电子邮件服务</h2><p>smtp：simple mail transmission protocol</p><p>pop3：post office protocol</p><p>imap4：Internet Mail Access Protocol</p><h3 id="mail命令"><a href="#mail命令" class="headerlink" title="mail命令"></a>mail命令</h3><p><em>mailx - send and receive Internet mail</em></p><p><strong>MUA：Mail User Agent，用户收发邮件的工具程序</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mailx [-s <span class="string">'SUBJECT'</span>] username[@hostname]</span><br><span class="line">邮件正文的生成：</span><br><span class="line">1.交互式输入：‘.’单独成行可以表示正文结束；Ctrl+d提交亦可</span><br><span class="line">2.通过输入重定向</span><br><span class="line">3.通过管道</span><br></pre></td></tr></table></figure><h3 id="at命令"><a href="#at命令" class="headerlink" title="at命令"></a>at命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">at [OPTION]... TIME</span><br><span class="line">TIME的表示方式 HH:MM [YYYY-mm-dd]</span><br><span class="line"> noon，midnight，teatime，tomorrow</span><br><span class="line"> now+(minutes,hours,days,days,weeks)</span><br><span class="line">at的作业有队列，用单个字母表示，默认都使用a队列</span><br><span class="line">常用选项</span><br><span class="line">-l：查看作业队列，相当于atq</span><br><span class="line">-f /PATH/FROM/SOMEFILE：从指定文件中读取作业任务，而不用再交互式输入</span><br><span class="line">-d：删除指定的作业，相当于atrm</span><br><span class="line">-c：查看指定作业的具体内容</span><br><span class="line">-q QUEUE：指明队列</span><br></pre></td></tr></table></figure><p><em>注意：作业执行结果是以邮件发送给提交作业的用户</em></p><h3 id="batch命令"><a href="#batch命令" class="headerlink" title="batch命令"></a>batch命令</h3><blockquote><p>batch会让系统自行选择再系统资源较空闲的时间去执行指定的任务</p></blockquote><h2 id="周期性任务计划：cron"><a href="#周期性任务计划：cron" class="headerlink" title="周期性任务计划：cron"></a>周期性任务计划：cron</h2><h3 id="服务程序"><a href="#服务程序" class="headerlink" title="服务程序"></a>服务程序</h3><p>cronle：主程序包，提供了crond守护进程及相关辅助工具</p><p>确保crond守护进程（daemon）</p><blockquote><p>systemctl status crond.service</p><p>​    Active:active (running) … …</p></blockquote><p><em>向crond提交作业的方式不同于at，它需要使用专用的配置文件，此文件有固定格式，不建议使用文本编辑器直接编辑此文件；要使用crontab命令</em></p><h3 id="cron任务分为两类"><a href="#cron任务分为两类" class="headerlink" title="cron任务分为两类"></a>cron任务分为两类</h3><ul><li><p>系统cron任务：主要用于实现系统自身的维护</p><ul><li>手动编辑：/etc/crontab文件</li></ul></li><li><p>用户cron任务</p><ul><li>命令：crontab命令</li></ul></li></ul><h3 id="系统cron的配置格式"><a href="#系统cron的配置格式" class="headerlink" title="系统cron的配置格式"></a>系统cron的配置格式</h3><p>/etc/crontab</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># |  |  |  |  |</span></span><br><span class="line"><span class="comment"># *  *  *  *  * user-name  command to be executed</span></span><br><span class="line">1.每一行定义一个周期性任务，共7个字段</span><br><span class="line">*  *  *  *  *：定义周期性时间</span><br><span class="line">user-name：运行任务的用户身份</span><br><span class="line"><span class="built_in">command</span> to be executed：任务</span><br><span class="line">2.此处的环境变量不同于用户登录后获得的环境，因此，建议命令使用绝对路径，或者自定义PATH环境变量</span><br><span class="line">3.执行结果邮件发送给MAILTO指定用户</span><br></pre></td></tr></table></figure><h3 id="用户cron的配置格式"><a href="#用户cron的配置格式" class="headerlink" title="用户cron的配置格式"></a>用户cron的配置格式</h3><p>/var/spool/cron/USERNAME</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"></span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># |  |  |  |  |</span></span><br><span class="line"><span class="comment"># *  *  *  *  *  command to be executed</span></span><br><span class="line">1.每行定义一个cron任务，共6个字段</span><br><span class="line">2.此处的环境变量不同于用户登录后获得的环境，因此，建议命令使用绝对路径，或者自定义PATH环境变量</span><br><span class="line">3.邮件发送给当前用户</span><br></pre></td></tr></table></figure><p>时间表示法：</p><ol><li>特定值：给定时间点有效取值范围内的值（ps：day of week和day of mounth一般不同时使用）</li><li>*：给定时间点上有效取值范围内的所有值，表示“每..”</li><li>离散取值：再时间点上使用逗号分隔的多个值 #,#,#</li><li>连续取值：在时间点上使用“-”连接开头和结束 #-#</li><li>在指定时间点上，定义步长，/#，#表示步长</li><li>指定的时间点不能被步长整除时，其意义将不复存在</li><li>最小时间单位为“分钟”，想完成“秒”级任务，需要额外借助于其他机制，定义成每分钟任务，利用脚本实现在每分钟之内，循环执行多次</li></ol><p>示例：</p><ol><li>3 * * * *：每小时第3分钟执行一次</li><li>3 4 * * 5：每周五4点3分执行一次</li><li>5 6 7 * *：每月7号6点5分执行一次</li><li>7 8 9 10 *：每年10月9号8点7分执行一次</li><li>9 8 * * 3,7：每周三和周日8点9分各执行一次</li><li>0 8,20 * * 3,7：每周三和周日的早八点和晚八点各执行一次</li><li>0 9-18 * * 1-5：周一到周五每天9点到18点每小时都执行一次</li><li>*/5 * * * *：每5分钟执行一次</li></ol><h3 id="crontab命令"><a href="#crontab命令" class="headerlink" title="crontab命令"></a>crontab命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crontab [-u user] [-l|-r|-e] [-i] [-s]</span><br><span class="line">-e：编辑任务</span><br><span class="line">-l：列出所有任务</span><br><span class="line">-r：移除所有任务，即删除/var/spool/cron/USERNAME文件</span><br><span class="line">-i：在使用-r选项移除所有任务时提示用户确认</span><br><span class="line">-u user：root用户可为指定用户管理cron任务</span><br></pre></td></tr></table></figure><p>运行结果以邮件通知给当前用户，如果用户拒绝接收邮件</p><blockquote><p>COMMAND &gt; /dev/null</p><p>COMMAND &amp;&gt; /dev/null</p></blockquote><p>定义COMMAND时，如果命令需要用到%，需要对其转义；放置于单引号中的%不用转义</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux任务计划、周期性执&quot;&gt;&lt;a href=&quot;#Linux任务计划、周期性执&quot; class=&quot;headerlink&quot; title=&quot;Linux任务计划、周期性执&quot;&gt;&lt;/a&gt;Linux任务计划、周期性执&lt;/h1&gt;&lt;p&gt;未来的某时间点执行一次某任务：at batc
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>bash脚本编程之用户交互</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/bash%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%94%A8%E6%88%B7%E4%BA%A4%E4%BA%92/"/>
    <id>http://yoursite.com/Linux基础/bash脚本编程之用户交互/</id>
    <published>2020-06-30T08:05:22.000Z</published>
    <updated>2020-06-30T08:29:43.800Z</updated>
    
    <content type="html"><![CDATA[<h1 id="bash脚本编程之用户交互"><a href="#bash脚本编程之用户交互" class="headerlink" title="bash脚本编程之用户交互"></a>bash脚本编程之用户交互</h1><h2 id="用户交互-read"><a href="#用户交互-read" class="headerlink" title="用户交互 read"></a>用户交互 read</h2><p><em>用户交互：通过键盘输入数据，从而完成变量赋值操作</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> [OPTION]... [name...]</span><br><span class="line">-p <span class="string">'PROMPT'</span></span><br><span class="line">-t TIMEOUT</span><br></pre></td></tr></table></figure><blockquote><p>bash -n /path/to/some_script</p></blockquote><p>检查脚本中的语法错误</p><blockquote><p>bash -x /path/to/some_script</p></blockquote><p>调试执行</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;bash脚本编程之用户交互&quot;&gt;&lt;a href=&quot;#bash脚本编程之用户交互&quot; class=&quot;headerlink&quot; title=&quot;bash脚本编程之用户交互&quot;&gt;&lt;/a&gt;bash脚本编程之用户交互&lt;/h1&gt;&lt;h2 id=&quot;用户交互-read&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux压缩工具</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/Linux%E5%8E%8B%E7%BC%A9%E5%B7%A5%E5%85%B7/"/>
    <id>http://yoursite.com/Linux基础/Linux压缩工具/</id>
    <published>2020-06-23T06:41:39.000Z</published>
    <updated>2020-06-30T08:02:32.819Z</updated>
    
    <content type="html"><![CDATA[<h1 id="压缩和解压缩工具"><a href="#压缩和解压缩工具" class="headerlink" title="压缩和解压缩工具"></a>压缩和解压缩工具</h1><h2 id="压缩比"><a href="#压缩比" class="headerlink" title="压缩比"></a>压缩比</h2><p>目的：时间 换 空间；CPU的时间–&gt;磁盘空间</p><h2 id="压缩工具"><a href="#压缩工具" class="headerlink" title="压缩工具"></a>压缩工具</h2><p>compress/uncompress，.z</p><p>gzip/gunzip，.gz</p><p>bzip2/bunzip2，.bz2</p><p>xz/unxz，.xz</p><p>zip/unzip</p><p>lzma/unlzma，.lzma</p><p>tar，cpio</p><h3 id="gzip-gunzip-zcat"><a href="#gzip-gunzip-zcat" class="headerlink" title="gzip/gunzip/zcat"></a>gzip/gunzip/zcat</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gzip [OPTION]... FILE..</span><br><span class="line">-d：压缩前，相当于gunzip</span><br><span class="line">-<span class="comment">#：指定压缩比，默认是6；数字越大压缩比越大（1-9）</span></span><br><span class="line">-c：将压缩结果输出至标准输出</span><br><span class="line">gzip -c FILE &gt; /PATH/TO/SOMEFILE.gz</span><br></pre></td></tr></table></figure><h3 id="bzip2-bunzip2-bzact"><a href="#bzip2-bunzip2-bzact" class="headerlink" title="bzip2/bunzip2/bzact"></a>bzip2/bunzip2/bzact</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bzip2 [OPTION]...FILE...</span><br><span class="line">-d：解压缩</span><br><span class="line">-<span class="comment">#：指定压缩比，默认是6；数字越大压缩比越大（1-9）</span></span><br><span class="line">-k：keep，保留文件</span><br></pre></td></tr></table></figure><h3 id="xz-unxz-xzcat"><a href="#xz-unxz-xzcat" class="headerlink" title="xz/unxz/xzcat"></a>xz/unxz/xzcat</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xz [OPTION]...FILE...</span><br><span class="line">-d：解压缩</span><br><span class="line">-<span class="comment">#：指定压缩比，默认是6；数字越大压缩比越大（1-9）</span></span><br><span class="line">-k：保留源文件</span><br></pre></td></tr></table></figure><h2 id="归档：tar，cpio"><a href="#归档：tar，cpio" class="headerlink" title="归档：tar，cpio"></a>归档：tar，cpio</h2><h2 id="tar命令"><a href="#tar命令" class="headerlink" title="tar命令"></a>tar命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar [OPTION]... FILE...</span><br><span class="line">创建归档 -cf /PATH/TO/SOMEFILE.tar FILE...</span><br><span class="line">展开归档 -xf /PATH/TO/SOMEFILE.tar</span><br><span class="line">查看归档文件的文件列表 -tf /PATH/TO/SOMEFILE.tar</span><br></pre></td></tr></table></figure><p><strong>归档完成后通常需要压缩，结果此前的压缩工具，就能实现压缩多个文件了</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">归档压缩</span><br><span class="line">-z：gzip2</span><br><span class="line">-zcf /PATH/TO/SOMEFILE.tar.gz FILE...</span><br><span class="line">解压缩并展开归档</span><br><span class="line">-zxf /PATH/TO/SOMEFILE.tar.gz</span><br><span class="line">-j：bzip2</span><br><span class="line">-jcf</span><br><span class="line">-jxf</span><br><span class="line">-J：xz</span><br><span class="line">-Jcf</span><br><span class="line">-Jxf</span><br></pre></td></tr></table></figure><h2 id="ZIP"><a href="#ZIP" class="headerlink" title="ZIP"></a>ZIP</h2><p>zip/unzip</p><p>后缀名：.zip</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;压缩和解压缩工具&quot;&gt;&lt;a href=&quot;#压缩和解压缩工具&quot; class=&quot;headerlink&quot; title=&quot;压缩和解压缩工具&quot;&gt;&lt;/a&gt;压缩和解压缩工具&lt;/h1&gt;&lt;h2 id=&quot;压缩比&quot;&gt;&lt;a href=&quot;#压缩比&quot; class=&quot;headerlink&quot; ti
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>btrfs文件系统管理</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/btrfs%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/Linux基础/btrfs文件系统管理/</id>
    <published>2020-06-23T01:50:20.000Z</published>
    <updated>2020-06-23T03:40:49.631Z</updated>
    
    <content type="html"><![CDATA[<h1 id="btrfs文件系统"><a href="#btrfs文件系统" class="headerlink" title="btrfs文件系统"></a>btrfs文件系统</h1><h2 id="核心特性"><a href="#核心特性" class="headerlink" title="核心特性"></a>核心特性</h2><ul><li>多物理卷支持：btrfs可由多个底层物理卷组成；支持RAID，以联机“添加”、“移除”、“修改”；</li><li>写时复制更新机制（CoW）：复制、更新、及替换指针，而非“就地”更新</li><li>自卷：sub_volume</li><li>快照：支持快照的快照</li><li>透明压缩</li></ul><h2 id="文件系统创建"><a href="#文件系统创建" class="headerlink" title="文件系统创建"></a>文件系统创建</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mkfs.btrfs</span><br><span class="line">-L <span class="string">'LABEL'</span></span><br><span class="line">-d &lt;<span class="built_in">type</span>&gt;：raid0,raid1,raid5,raid6,raid10,single</span><br><span class="line">-m &lt;profile&gt;：raid0,raid1,raid5,raid6,raid10,single，dup</span><br><span class="line">-O &lt;feature&gt;</span><br><span class="line">-O list-all：列出支持的所有feature</span><br><span class="line">属性查看：</span><br><span class="line">btrfs filesystem show</span><br><span class="line">挂载文件系统：</span><br><span class="line">mount -t btrfs /dev/sdb MOUNT_POINT</span><br><span class="line">透明压缩机制：</span><br><span class="line">mount -o compress=&#123;lzo|zlib&#125; DEVICE_POINT</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;btrfs文件系统&quot;&gt;&lt;a href=&quot;#btrfs文件系统&quot; class=&quot;headerlink&quot; title=&quot;btrfs文件系统&quot;&gt;&lt;/a&gt;btrfs文件系统&lt;/h1&gt;&lt;h2 id=&quot;核心特性&quot;&gt;&lt;a href=&quot;#核心特性&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>模板</title>
    <link href="http://yoursite.com/uncategorized/hello-world/"/>
    <id>http://yoursite.com/uncategorized/hello-world/</id>
    <published>2020-06-15T08:14:27.324Z</published>
    <updated>2019-06-21T06:04:47.163Z</updated>
    
    <content type="html"><![CDATA[<p>持续更新中。。。</p><h1 id="标题一"><a href="#标题一" class="headerlink" title="标题一"></a>标题一</h1><h2 id="标题二"><a href="#标题二" class="headerlink" title="标题二"></a>标题二</h2><h3 id="标题三"><a href="#标题三" class="headerlink" title="标题三"></a>标题三</h3><h4 id="标题四"><a href="#标题四" class="headerlink" title="标题四"></a>标题四</h4><h5 id="标题五"><a href="#标题五" class="headerlink" title="标题五"></a>标题五</h5><h6 id="标题六"><a href="#标题六" class="headerlink" title="标题六"></a>标题六</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是一个bash</span><br></pre></td></tr></table></figure><p>外链: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><p><em>斜体</em><br><strong>粗体</strong><br><strong><em>加粗斜体</em></strong><br><del>删除线</del></p><blockquote><p>文字引用</p></blockquote><p><code>行内代码</code></p><p>​<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">多行代码</span><br><span class="line">多行代码</span><br><span class="line">​</span><br></pre></td></tr></table></figure></p><p>$$<br>数学公式<br>$$</p><h3 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h3><p>方法一：—</p><p>方法二：+++</p><p>方法三：***</p><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ol><li>有序列表项</li></ol><ul><li>无序列表项</li></ul><ul><li>无序列表项</li></ul><ul><li>无序列表项</li></ul><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p>表头1|表头2<br>-|-|-<br>内容11|内容12<br>内容21|内容22</p><h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;持续更新中。。。&lt;/p&gt;
&lt;h1 id=&quot;标题一&quot;&gt;&lt;a href=&quot;#标题一&quot; class=&quot;headerlink&quot; title=&quot;标题一&quot;&gt;&lt;/a&gt;标题一&lt;/h1&gt;&lt;h2 id=&quot;标题二&quot;&gt;&lt;a href=&quot;#标题二&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>LVM2</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/LVM2/"/>
    <id>http://yoursite.com/Linux基础/LVM2/</id>
    <published>2020-06-12T03:01:56.000Z</published>
    <updated>2020-06-23T01:50:44.049Z</updated>
    
    <content type="html"><![CDATA[<h1 id="LVM2"><a href="#LVM2" class="headerlink" title="LVM2"></a>LVM2</h1><p><em>LVM:logical Volume Manager,Version:2</em></p><p>dm:device mapper,将一个或多个底层块设备组织成一个逻辑设备的模块</p><p>/dev/dm-#</p><p>/dev/mapper/VG_NAME-LV_NAME</p><p>​    /dev/mapper/vo10-root</p><p>/dev/VG_NAME/LV_NAME</p><p>​    /dev/vo10/root</p><h2 id="pv管理工具"><a href="#pv管理工具" class="headerlink" title="pv管理工具"></a>pv管理工具</h2><ul><li><p>pvs：简要pv信息显示</p></li><li><p>pvdisplay：显示pv的详细信息</p></li><li><p>pvcreate：/dev/DEVICE：创建pv</p></li><li><p>pvremove</p></li></ul><h2 id="vg管理工具"><a href="#vg管理工具" class="headerlink" title="vg管理工具"></a>vg管理工具</h2><ul><li>vgs</li><li>vgdisplay</li><li>vgcreat</li><li>vgextend</li><li>vgreduce</li><li>vgremove<ul><li>先做pvmove</li></ul></li></ul><h2 id="lv管理工具"><a href="#lv管理工具" class="headerlink" title="lv管理工具"></a>lv管理工具</h2><ul><li><p>lvs</p></li><li><p>lvdisplay</p></li><li><p>lvcreate -L #[大小mMgGtT] -n NAME VolumeGroup</p></li><li><p>lvremove</p></li></ul><h2 id="扩展逻辑卷"><a href="#扩展逻辑卷" class="headerlink" title="扩展逻辑卷"></a>扩展逻辑卷</h2><ul><li>lvextend -L [+]#[mMgGtT] /dev/VG_NAME/LV_NAME</li><li>resize2fs /dev/VG_NAME/LV_NAME</li></ul><h2 id="缩减逻辑卷"><a href="#缩减逻辑卷" class="headerlink" title="缩减逻辑卷"></a>缩减逻辑卷</h2><ul><li>umount /dev/VG_NAME/LV_NAME</li><li>e2fsck -f /dev/VG_NAME/LV_NAME</li><li>resize2fs /dev/VG_NAME/LV_NAME</li><li>lvreduce -L [-]#[mMgGtT] /dev/VG_NAME/LV_NAME</li><li>mount</li></ul><h2 id="快照：snapshot"><a href="#快照：snapshot" class="headerlink" title="快照：snapshot"></a>快照：snapshot</h2><p>lvcreat -L #[mMgGtT] -p r -s snapshot_lv_name original_lv_name</p><h1 id="文件系统挂载使用"><a href="#文件系统挂载使用" class="headerlink" title="文件系统挂载使用"></a>文件系统挂载使用</h1><h2 id="挂载光盘设备："><a href="#挂载光盘设备：" class="headerlink" title="挂载光盘设备："></a>挂载光盘设备：</h2><ul><li>光盘设备文件<ul><li>IDE：/dev/hdc</li><li>SATA：/dev/sr0</li><li>符号链接文件<ul><li>/dev/cdrom</li><li>/dev/cdrw</li><li>/dev/dvd</li><li>/dev/dvdrw</li></ul></li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mount -r /dev/cdrom /media/cdrom</span><br><span class="line">umount /dev/cdrom</span><br></pre></td></tr></table></figure><h2 id="dd命令"><a href="#dd命令" class="headerlink" title="dd命令"></a>dd命令</h2><p><em>convent and copy a file</em></p><p>用法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/PATH/FROM/SRC of=/PATH/TO/DEST</span><br><span class="line">bs=<span class="comment">#：block size ，复制单元大小</span></span><br><span class="line">count=<span class="comment">#：复制多少个bs</span></span><br></pre></td></tr></table></figure><p>磁盘拷贝：</p><blockquote><p>dd if=/dev/sda of=/dev/sdb</p></blockquote><p>备份MBR</p><blockquote><p>dd if=/dev/sda of=/tmp/mbr.bak bs=256 count=1</p></blockquote><p>破坏MBR中的bootloader：</p><blockquote><p>dd if=/dev/zero of=/dev/sda bs=256 count=1</p></blockquote><p>两个特殊设备：</p><p>/dev/null：数据黑洞</p><p>/dev/zero：吐零机</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;LVM2&quot;&gt;&lt;a href=&quot;#LVM2&quot; class=&quot;headerlink&quot; title=&quot;LVM2&quot;&gt;&lt;/a&gt;LVM2&lt;/h1&gt;&lt;p&gt;&lt;em&gt;LVM:logical Volume Manager,Version:2&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;dm:device
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>RAID</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/RAID/"/>
    <id>http://yoursite.com/Linux基础/RAID/</id>
    <published>2019-12-26T03:18:47.000Z</published>
    <updated>2020-06-11T10:12:55.146Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RAID"><a href="#RAID" class="headerlink" title="RAID"></a>RAID</h1><h2 id="RAID-0-条带卷-strip"><a href="#RAID-0-条带卷-strip" class="headerlink" title="RAID-0 条带卷 strip"></a>RAID-0 条带卷 strip</h2><ul><li>读、写性能提升</li><li>可用空间：N*min(s1,s2,…)</li><li>无容错能力</li><li>最少磁盘数：2,2+</li></ul><h2 id="RAID-1-镜像卷-mirror"><a href="#RAID-1-镜像卷-mirror" class="headerlink" title="RAID-1 镜像卷 mirror"></a>RAID-1 镜像卷 mirror</h2><ul><li>读性能提升、写性能略有下降</li><li>可用空间：1*min(s1,s2,…)</li><li>有冗余能力</li><li>最少磁盘数：2,2+</li></ul><h2 id="RAID-4："><a href="#RAID-4：" class="headerlink" title="RAID-4："></a>RAID-4：</h2><p>数据，数据，校验（异或校验）<br>1101,0110,1011 </p><h2 id="RAID-5"><a href="#RAID-5" class="headerlink" title="RAID-5"></a>RAID-5</h2><ul><li>读，写性能提升</li><li>可用空间：（N-1）*min（s1,s2,…）</li><li>有容错能力</li><li>最少磁盘数：3,3+</li></ul><h2 id="RAID-6"><a href="#RAID-6" class="headerlink" title="RAID-6"></a>RAID-6</h2><ul><li>读，写性能提升</li><li>可用空间：（N-2）*min（s1，s2，…）</li><li>有容错能力：2块磁盘</li><li>最少磁盘数：4,4+</li></ul><h2 id="RAID-10"><a href="#RAID-10" class="headerlink" title="RAID-10"></a>RAID-10</h2><ul><li>读，写性能提升</li><li>可用空间：N*min（s1，s2，….）/2</li><li>有容错能力：每组镜像最多只能坏1块</li><li>最少磁盘数：4,4+</li></ul><h2 id="JBOD-Just-a-Bunch-Of-Disks"><a href="#JBOD-Just-a-Bunch-Of-Disks" class="headerlink" title="JBOD Just a Bunch Of Disks"></a>JBOD Just a Bunch Of Disks</h2><ul><li>功能：将多块磁盘的空间合并一个大的连续空间使用</li><li>可用空间：sum（s1，s2，….）</li></ul><p><em>常见级别：RAID-0，RAID-1，RAID-5，RAID-10，RAID-50，JBOD</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;RAID&quot;&gt;&lt;a href=&quot;#RAID&quot; class=&quot;headerlink&quot; title=&quot;RAID&quot;&gt;&lt;/a&gt;RAID&lt;/h1&gt;&lt;h2 id=&quot;RAID-0-条带卷-strip&quot;&gt;&lt;a href=&quot;#RAID-0-条带卷-strip&quot; class=&quot;head
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>shell脚本编程</title>
    <link href="http://yoursite.com/shell%E8%84%9A%E6%9C%AC/shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B/"/>
    <id>http://yoursite.com/shell脚本/shell脚本编程/</id>
    <published>2019-11-20T09:19:44.000Z</published>
    <updated>2020-07-15T09:03:49.711Z</updated>
    
    <content type="html"><![CDATA[<h1 id="bash脚本编程"><a href="#bash脚本编程" class="headerlink" title="bash脚本编程"></a>bash脚本编程</h1><h2 id="脚本文件格式"><a href="#脚本文件格式" class="headerlink" title="脚本文件格式"></a>脚本文件格式</h2><p>第一行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br></pre></td></tr></table></figure><p>注释信息：#<br>代码注释<br>缩进，适度添加空白行</p><h2 id="语言"><a href="#语言" class="headerlink" title="语言"></a>语言</h2><p>编程语法格式，库，算法和数据结构<br>编程思想：问题空间–&gt;解空间</p><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul><li>局部变量</li><li>本地变量</li><li>环境变量</li><li>位置参数变量</li><li>特殊变量</li></ul><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>字符型、数值型<br>弱类型：字符型</p><h3 id="算数运算"><a href="#算数运算" class="headerlink" title="算数运算"></a>算数运算</h3><p>let VAR=expression<br>    VAR=$[expression]<br>    VAR=$((exptession))<br>    VAR=$(expr argu1 argu2 argu3)<br><em>注意：有些时候乘法符号需要转义</em></p><h4 id="增强型赋值"><a href="#增强型赋值" class="headerlink" title="增强型赋值"></a>增强型赋值</h4><p>变量做某种算数运算后回存至此变量中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> i=<span class="variable">$i</span>+n</span><br><span class="line"><span class="built_in">let</span> i+=n</span><br><span class="line">+=,-=,*=,/=,%=</span><br></pre></td></tr></table></figure><p><strong>自增</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VAR=$[<span class="variable">$VAR</span>+1]</span><br><span class="line"><span class="built_in">let</span> VAR+=1</span><br><span class="line"><span class="built_in">let</span> VAR++</span><br></pre></td></tr></table></figure><p><strong>自减</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VAR=$[<span class="variable">$VAR</span>-1]</span><br><span class="line"><span class="built_in">let</span> VAR-=1</span><br><span class="line"><span class="built_in">let</span> VAR--</span><br></pre></td></tr></table></figure><h3 id="条件测试"><a href="#条件测试" class="headerlink" title="条件测试"></a>条件测试</h3><p>判断某需求是否满足，需要由测试机制来实现<br>如何编写测试表达式以实现所需的测试</p><ol><li>执行命令，并利用命令状态返回值来判断<ul><li>0：成功</li><li>1-255：失败</li></ul></li><li>测试表达式<ul><li>test EXPRESSION</li><li>[ EXPRESSION ]</li><li>[[ EXPRESSION ]]<br>注意：EXPRESSION两端必须有空白字符，否则为语法错误 </li></ul></li></ol><h4 id="bash的测试类型"><a href="#bash的测试类型" class="headerlink" title="bash的测试类型"></a>bash的测试类型</h4><ul><li><p>数值测试：数值比较</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-eq：是否等于；[ &amp;num1 -eq $num2 ]</span><br><span class="line">-ne：是否不等于</span><br><span class="line">-gt：是否大于</span><br><span class="line">-ge：是否大于等于</span><br><span class="line">-lt：是否小于</span><br><span class="line">-le：是否小于等于</span><br></pre></td></tr></table></figure></li><li><p>字符串测试</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">==：是否等于</span><br><span class="line">&gt;：是否大于</span><br><span class="line">&lt;：是否小于</span><br><span class="line">!=：是否不等于</span><br><span class="line">=~：左侧的字符串是否能够被右侧的PATTERN所匹配</span><br><span class="line">-z &quot;STRING&quot;：判断指定的字串是否为空；空则为真，不空为假</span><br><span class="line">-n &quot;STRING&quot;：判断指定的字符串是否不空；不空则真，空则为假</span><br><span class="line">注意：字符串要加引号，要使用[[]]</span><br></pre></td></tr></table></figure></li><li><p>文件测试</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">存在性测试</span><br><span class="line"> -a FILE</span><br><span class="line"> -e FILE</span><br><span class="line">存在为真，否则为假</span><br><span class="line">存在性及类型测试</span><br><span class="line"> -b FILE：是否存在并且为块设备文件</span><br><span class="line"> -c FILE：是否存在并且为字符设备文件</span><br><span class="line"> -d FILE：是否存在并且为目录文件</span><br><span class="line"> -f FILE：是否存在并且为普通文件</span><br><span class="line"> -h FILE或-L FILE：是否存在并且为符号链接文件</span><br><span class="line"> -p FILE：是否存在且为命名管道文件</span><br><span class="line"> -S FILE：是否存在且为套接字文件</span><br><span class="line">文件权限测试</span><br><span class="line"> -r FILE：是否存在并且对当前用户可读</span><br><span class="line"> -w FILE：是否存在并且对当前用户可写</span><br><span class="line"> -x FILE：是否存在并且对当前用户可执行</span><br><span class="line">特殊权限测试</span><br><span class="line"> -u FILE：是否存在并且拥有suid权限</span><br><span class="line"> -g FILE：是否存在并且拥有sgid权限</span><br><span class="line"> -k FILE：是否存在并且拥有sticky权限</span><br><span class="line">文件是否有内容</span><br><span class="line"> -s FILE：是否有内容</span><br><span class="line">时间戳：</span><br><span class="line"> -N FILE：文件自从上一次读操作后是否被修改过</span><br><span class="line">从属关系测试</span><br><span class="line"> -O FILE：当前用户是否为文件是属主</span><br><span class="line"> -G FILE：当前用户是否属于文件的属组</span><br><span class="line">双目测试</span><br><span class="line"> FILE1 -ef FILE2：FILE1与FILE2是否为指向同一个文件系统的相同Inode的硬链接</span><br><span class="line"> FILE1 -nt FILE2：FILE1是否新于FILE2</span><br><span class="line"> FILE1 -ot FILE2：FILE1是否旧于FILE2</span><br></pre></td></tr></table></figure></li><li><p>组合测试条件</p><ul><li><p>逻辑运算</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一种方式</span><br><span class="line">COMMAND1 &amp;&amp; COMMAND2</span><br><span class="line">COMMAND1 || COMMAND2</span><br><span class="line">! COMMAND</span><br><span class="line">[ -O FILE ] &amp;&amp; [ -r FILE ]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第二种方式</span><br><span class="line">EXPRESSION1 -a EXPRESSION2</span><br><span class="line">EXPRESSION1 -o EXPERSSION2</span><br><span class="line">! EXPRESSION</span><br><span class="line">[ -O FILE -a -x FILE ]</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="脚本的状态返回值"><a href="#脚本的状态返回值" class="headerlink" title="脚本的状态返回值"></a>脚本的状态返回值</h4><p><em>默认是脚本中执行的最后一条命令的状态返回值</em><br>自定义状态退出状态码</p><blockquote><p>exit [n]：n为自己指定的状态码<br><em>主意：shell进程遇到exit时，即会终止，因此，整个脚本执行即为结束</em></p></blockquote><h2 id="向脚本传递参数"><a href="#向脚本传递参数" class="headerlink" title="向脚本传递参数"></a>向脚本传递参数</h2><h3 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myscript.sh argu1 argu2</span><br><span class="line">引用方式：<span class="variable">$1</span>，<span class="variable">$2</span>，...，<span class="variable">$&#123;10&#125;</span>，<span class="variable">$&#123;11&#125;</span>...</span><br><span class="line">轮替：</span><br><span class="line"><span class="built_in">shift</span> [n] ：位置参数轮替</span><br></pre></td></tr></table></figure><h2 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$0</span>：脚本文件路径本身</span><br><span class="line"><span class="variable">$#</span>：脚本参数的个数</span><br><span class="line">$*：所有参数</span><br><span class="line"><span class="variable">$@</span>：所有参数</span><br></pre></td></tr></table></figure><h2 id="过程编程语言的代码执行程序"><a href="#过程编程语言的代码执行程序" class="headerlink" title="过程编程语言的代码执行程序"></a>过程编程语言的代码执行程序</h2><ul><li><p>顺序执行：逐条运行</p></li><li><p>选择执行</p><ul><li>代码有一个分支：条件满足时才会执行</li><li>两个或以上的分支：只会执行其中一个满足条件的分支</li></ul></li><li><p>循环执行：</p><ul><li>代码片段（循环体）要执行0、1或多个来回</li></ul></li><li><p>选择执行</p><ul><li><p>单分支的if语句</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if 测试条件;then</span><br><span class="line">代码分支</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></li><li><p>双分支的if语句</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if 测试条件;then</span><br><span class="line">条件为真时执行的分支</span><br><span class="line">else</span><br><span class="line">条件为假时执行的分支</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></li></ul></li></ul><pre><code>- 多分支的if语句<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 测试条件1;<span class="keyword">then</span></span><br><span class="line">条件为真时执行的分支</span><br><span class="line"><span class="keyword">elif</span> 测试条件2;<span class="keyword">then</span></span><br><span class="line">条件为真时执行的分支</span><br><span class="line"><span class="keyword">elif</span> 测试条件3;<span class="keyword">then</span></span><br><span class="line">条件为真时执行的分支</span><br><span class="line">...</span><br><span class="line"><span class="keyword">elif</span> 测试条件n;<span class="keyword">then</span></span><br><span class="line">条件为真时执行的分支</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">注意：即便多个条件可能同时满足，分支只会执行其中一个，首先测试为“真”</span><br></pre></td></tr></table></figure></code></pre><h3 id="循环执行"><a href="#循环执行" class="headerlink" title="循环执行"></a>循环执行</h3><p>将一段代码重复执行0、1或多次</p><p>进入条件：条件满足时才进入循环</p><p>退出条件：每个循环都应该有退出条件，以有机会退出循环</p><p>bash脚本：</p><ul><li>for循环</li><li>while循环</li><li>until循环</li></ul><h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><p>两种格式</p><ul><li>遍历列表</li><li>控制变量</li></ul><p>遍历列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> VARAIBLE <span class="keyword">in</span> LIST;<span class="keyword">do</span></span><br><span class="line">循环体</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>进入条件：只要列表有元素，即可进入循环</p><p>退出条件：列表中的元素遍历完成</p><p>LIST的生成方式</p><ol><li><p>直接给出</p></li><li><p>整数列表</p><ol><li>{start..end}</li><li>seq [start [incremtal]] last</li></ol></li><li><p>返回列表的命令</p></li><li><p>glob</p></li><li><p>变量引用：$@</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;bash脚本编程&quot;&gt;&lt;a href=&quot;#bash脚本编程&quot; class=&quot;headerlink&quot; title=&quot;bash脚本编程&quot;&gt;&lt;/a&gt;bash脚本编程&lt;/h1&gt;&lt;h2 id=&quot;脚本文件格式&quot;&gt;&lt;a href=&quot;#脚本文件格式&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="shell脚本" scheme="http://yoursite.com/categories/shell%E8%84%9A%E6%9C%AC/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux磁盘及文件系统管理</title>
    <link href="http://yoursite.com/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/%E7%A3%81%E7%9B%98%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8F%8A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    <id>http://yoursite.com/Linux系统管理/磁盘的使用及文件系统/</id>
    <published>2019-11-18T08:16:58.000Z</published>
    <updated>2019-11-20T06:55:41.430Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux的哲学思想：一切皆文件"><a href="#Linux的哲学思想：一切皆文件" class="headerlink" title="Linux的哲学思想：一切皆文件"></a>Linux的哲学思想：一切皆文件</h1><h2 id="设备类型"><a href="#设备类型" class="headerlink" title="设备类型"></a>设备类型</h2><p><strong>块（block）</strong>：随机访问，数据交换单位是“块”<br><strong>字符（character）</strong>：线性访问，数据交换单位是“字符”</p><h2 id="设备文件：FHS"><a href="#设备文件：FHS" class="headerlink" title="设备文件：FHS"></a>设备文件：FHS</h2><h3 id="dev"><a href="#dev" class="headerlink" title="/dev"></a>/dev</h3><p><strong>设备文件</strong>：关联至设备的驱动程序；设备的访问入口<br><strong>设备号：</strong></p><ul><li>major：主设备好，区分设备类型，用于标明设备所需要的驱动程序</li><li>minor：次设备号，区分同种类型下的不同的设备；是特定设备的访问入口</li></ul><p><strong>mknod命令</strong></p><p><em>make block or character special files</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mknod [OPTION]... NAME TYPE [MAJOR MINOR]</span><br><span class="line">-m MODE ：创建后的设备文件的访问权限</span><br></pre></td></tr></table></figure><h3 id="设备文件名：ICANN"><a href="#设备文件名：ICANN" class="headerlink" title="设备文件名：ICANN"></a>设备文件名：ICANN</h3><p><strong>磁盘</strong></p><ul><li>IDE：/dev/hd[a-z] 例如：/dev/hda,/dev/hdb</li><li>SCSI,SATA,USB,SAS：/dev/sd[a-z]</li></ul><p><strong>分区</strong>：/dev/sda#<br><em>注意：Centos 6和7统统将硬盘设备文件标识为/dev/sd[a-z]#</em></p><p><strong>引用设备的方式</strong></p><ul><li>设备文件名</li><li>卷标</li><li>UUID</li></ul><h3 id="磁盘分区：MBR，GPT"><a href="#磁盘分区：MBR，GPT" class="headerlink" title="磁盘分区：MBR，GPT"></a>磁盘分区：MBR，GPT</h3><p><strong>MBR</strong>：Master Boot Record<br><strong>分为三部分</strong></p><ul><li>446bytes：bootloader，程序，引导启动操作系统的程序</li><li>64bytes：分区表，每16bytes标识一个分区，一共只能有4个分区<ul><li>4主分区</li><li>3主1扩展，n逻辑分区</li></ul></li><li>2bytes：MBR区域的有效性标识：55AA为有效<br>主分区和扩展分区标识[1-4]<br>逻辑分区：[5+]</li></ul><h3 id="fdisk命令"><a href="#fdisk命令" class="headerlink" title="fdisk命令"></a>fdisk命令</h3><ol><li><p>查看磁盘的分区信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk -l [-u] [device...] ：列出指定磁盘设备上的分区情况</span><br></pre></td></tr></table></figure></li><li><p>管理分区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk device</span><br></pre></td></tr></table></figure></li></ol><p>fdisk提供了一个交互式接口来管理分区，它有许多子命令，分别用于不同的管理功能；所有的操作均在内存中完成，没有直接同步到磁盘；直到使用w命令保存至磁盘上</p><p><strong>常用命令</strong></p><ul><li>n：创建新分区</li><li>d：删除已有分区</li><li>t：修改分区类型</li><li>l：查看所有已知ID</li><li>w：保存并退出</li><li>q：不保存并退出</li><li>m：查看帮助信息</li><li>p：显示现有分区信息</li></ul><p><em>注意：在已经分区并且已经挂载其中某个分区的磁盘设备上创建的新分区，内核可能在创建完成后无法直接识别</em><br><strong>查看系统识别到的分区</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/partitons</span><br></pre></td></tr></table></figure><p><strong>通知内核强制重读磁盘分区表</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">partx -a [device]</span><br><span class="line">kpartx -af [device]</span><br></pre></td></tr></table></figure><p><strong>分区创建工具</strong>：parted，sfdisk</p><h2 id="创建文件系统"><a href="#创建文件系统" class="headerlink" title="创建文件系统"></a>创建文件系统</h2><p><strong>格式化</strong>：低级格式化（分区之前进行，划分磁道）、高级格式化（分区之后对分区进行创建文件系统）</p><h3 id="元数据区"><a href="#元数据区" class="headerlink" title="元数据区"></a>元数据区</h3><p><strong>文件元数据inode（index node）</strong>：大小、权限、属主属组、时间戳、数据块指针</p><p><strong>符号链接文件</strong>：存储数据指针的空间当中存储的是真实文件的访问路径；<br><strong>设备文件</strong>：存储数据指针空间当中存储的是设备号（major，minor）<br>bitmap index：位图索引</p><h3 id="VFS：Virtual-File-System"><a href="#VFS：Virtual-File-System" class="headerlink" title="VFS：Virtual File System"></a>VFS：Virtual File System</h3><ul><li>Linux的文件系统：ext2(无日志功能)，ext3，ext4，xfs，reiserfs，btrfs</li><li>光盘：iso9660</li><li>网络文件系统：nfs，cifs</li><li>集群文件系统：gfs2，ocfs2</li><li>内核级分布式文件系统：ceph</li><li>windows的文件系统：vfat，ntfs</li><li>伪文件系统：proc，sysfs，tmpfs，hugepagefs</li><li>Unix的文件系统：UFS，FFS，JFS</li><li>交换文件系统：swap</li><li>用户空间的分布式文件系统：mogilefs，moosefs，glusterfs</li></ul><h3 id="文件系统管理工具"><a href="#文件系统管理工具" class="headerlink" title="文件系统管理工具"></a>文件系统管理工具</h3><ul><li>创建文件系统工具<ul><li>mkfs：mkfs.ext2,mkfs.ext3,mkfs.ext4,mkfs.xfs,mkfs.vfat,…</li></ul></li><li>检测及修复文件系统的工具<ul><li>fsck：fsck.ext2,fsck.ext3,…</li></ul></li><li>查看其属性的工具<ul><li>dumpe2fs,tune2fs</li></ul></li><li>调整文件系统特征<ul><li>tune2fs</li></ul></li></ul><h3 id="链接文件：访问同一个文件不同路径"><a href="#链接文件：访问同一个文件不同路径" class="headerlink" title="链接文件：访问同一个文件不同路径"></a>链接文件：访问同一个文件不同路径</h3><ul><li><p>硬链接：指向同一个inode的多个文件路径</p><ul><li>特性<ol><li>目录不支持硬链接</li><li>硬链接不能跨文件系统</li><li>创建硬链接会增加inode引用计数<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln src link_file</span><br></pre></td></tr></table></figure></li></ol></li></ul></li><li><p>符号链接：指向一个文件路径的另一个文件路径</p><ul><li>特性<ol><li>符号链接与文件是两个各自独立的文件，各有自己的inode，对源文件创建符号链接不会增加引用计数</li><li>支持对目录创建符号链接，可以跨文件系统</li><li>删除符号链接不影响源文件，但删除源文件，符号指定的路径即不存在，此时会变成无效链接</li><li>符号链接文件的大小是其指定文件的路径字符串的字节数<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s src link_file</span><br></pre></td></tr></table></figure></li></ol></li></ul></li></ul><h2 id="磁盘和文件系统管理"><a href="#磁盘和文件系统管理" class="headerlink" title="磁盘和文件系统管理"></a>磁盘和文件系统管理</h2><h3 id="内核文件系统的组成部分"><a href="#内核文件系统的组成部分" class="headerlink" title="内核文件系统的组成部分"></a>内核文件系统的组成部分</h3><ul><li>文件系统驱动：由内核提供</li><li>文件系统管理工具：由用户空间的应用程序提供</li></ul><h3 id="ext系列文件系统的管理工具"><a href="#ext系列文件系统的管理工具" class="headerlink" title="ext系列文件系统的管理工具"></a>ext系列文件系统的管理工具</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext2,mkfs.ext3,mkfs.ext4</span><br></pre></td></tr></table></figure><p>mkfs -t ext2=mkfs.ext2</p><p>ext系列文件系统专用管理工具：mke2fs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mke2fs [OPTIONS] device</span><br><span class="line">-t &#123;ext2|ext3|ext4&#125;：指明要创建的文件系统类型</span><br><span class="line">mkfs.ext4=mkfs -t ext4=mke2fs -t ext4</span><br><span class="line">-b &#123;1024|2048|4096&#125;：指明文件系统的块大小</span><br><span class="line">-L LABEL：指明卷标</span><br><span class="line">-j ：创建有日志功能的文件系统ext3</span><br><span class="line">mke2fs -j=mke2fs -t ext3=mkfs -t ext3=mkfs.ext3</span><br><span class="line">-i N：bytes-per-inode，指明inode与字节的比率；即每多少字节创建一个Inode</span><br><span class="line">-N N：直接指明要给此文件系统创建的inode的数量</span><br><span class="line">-m N：指定预留的空间，百分比</span><br><span class="line">-O [^]FEATURE ：以指定的特性创建目标文件系统</span><br></pre></td></tr></table></figure><p>e2label命令：卷标的查看与设定</p><ul><li>查看：e2label device</li><li>设定：e2label device LABEL</li></ul><p>tune2fs命令：查看或修改ext系列文件系统的某些属性<br><em>adjust tunable filesystem paramenters on ext2/ext3/ext4 filesystems</em><br>注意：块大小创建后不可修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tune2fs [OPTIONS] device</span><br><span class="line">-l：查看超级块的内容</span><br><span class="line">修改制定文件系统的属性</span><br><span class="line">-j：ext2--&gt;ext3</span><br><span class="line">-L LABEL：修改卷标</span><br><span class="line">-m N ：调整预留空间百分比</span><br><span class="line">-O [^]FEATHER：开启或关闭某种特性</span><br><span class="line">-o [^]mount_options：开启或关闭某种默认挂载选项</span><br><span class="line">acl</span><br><span class="line">^acl</span><br></pre></td></tr></table></figure><p>dempe2fs命令：显示ext系列文件系统的属性信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dumpe2fs [-h] device</span><br></pre></td></tr></table></figure><p>用户实现文件系统检测的工具<br><em>因进程意外终止或系统崩溃等原因导致定稿操作非正常终止时，可能会造成文件损坏；此时，应该检测并修复文件系统；建议，离线进行</em></p><p>ext系列文件系统的专用工具</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">e2fsck：check a linux ext2/ext3/ext4 file System</span><br><span class="line">e2fsck [OPTIONS] device</span><br><span class="line">-y：对所有问题自动回答为yes</span><br><span class="line">-f：即使文件系统处于clean状态，也要强制进行检测</span><br><span class="line"></span><br><span class="line">fsck： check and repair a linux file system </span><br><span class="line">-t fstype：指明文件系统类型</span><br><span class="line">fsck -t ext4=fsck.ext4</span><br><span class="line">-a：无需交互而自动修复所有错误</span><br><span class="line">-r：交互式修复</span><br></pre></td></tr></table></figure><h3 id="swap文件系统"><a href="#swap文件系统" class="headerlink" title="swap文件系统"></a>swap文件系统</h3><p><em>linux上的交换分区必须使用独立的文件系统，且文件系统的system ID必须为82</em></p><p>创建swap设备</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkswap [OPTIONS] device</span><br><span class="line">-L LABEL：指明卷标</span><br><span class="line">-f：强制</span><br></pre></td></tr></table></figure><p>fat32(vfat)：linux和windows都支持的文件系统<br>mkfs.vfat device</p><h3 id="文件系统的使用"><a href="#文件系统的使用" class="headerlink" title="文件系统的使用"></a>文件系统的使用</h3><p>挂载：mount<br>卸载：umount<br><em>根文件系统外的其他文件系统要想能够呗访问，都必须通过“关联”至根文件系统上的某个目录来实现，此关联操作即为“挂载”；</em></p><p><strong>挂载点</strong>：mount_point,用于作为另一个文件系统的访问入口</p><ol><li>事先存在</li><li>应该使用未被或不会被其他进程使用到的目录</li><li>挂载点下原有的文件将会被隐藏</li></ol><h3 id="mount命令"><a href="#mount命令" class="headerlink" title="mount命令"></a>mount命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mount [-fnrsvw] [-t vfstype] [-o options] device dir</span><br><span class="line">命令选项</span><br><span class="line">-r：<span class="built_in">readonly</span>，只读挂载</span><br><span class="line">-w：<span class="built_in">read</span> and write，读写挂载</span><br><span class="line">-n：默认情况下，设备挂载或卸载的操作会同步更新至/etc/mtab文件中； -n 用于禁止次特性</span><br><span class="line">-t vfstype：指明要挂载的设备上的文件系统的类型，多数情况下可省略，此时mount会通过blkid来判断要挂断的设备的文件系统类型</span><br><span class="line">-L LABEL：挂载时以卷标的方式指明设备</span><br><span class="line">mount -L LABEL dir</span><br><span class="line">-u UUID：挂载时以UUID的方式指明设备</span><br><span class="line">mount -U UUID dir</span><br><span class="line">-o options：挂载选项 </span><br><span class="line">sync/async：同步/异步操作</span><br><span class="line">atime/noatime：文件或目录在被访问时是否更新其访问时间戳</span><br><span class="line">diratime/nodiratime：目录在被访问时是否更新其访问时间戳</span><br><span class="line">remount：重新挂载</span><br><span class="line">acl：支持使用facl功能</span><br><span class="line">mount -o acl device dir</span><br><span class="line">tune2fs -o acl device</span><br><span class="line">ro：只读 </span><br><span class="line">rw：读写</span><br><span class="line">dev/nodev：此设备上是否允许创建设备文件</span><br><span class="line"><span class="built_in">exec</span>/noexec：是否允许允许此设备上的程序文件</span><br><span class="line">user/nouser：是否允许普通用户挂载此文件系统</span><br><span class="line">suid/nosuid：是否允许程序文件上的suid和sgid特殊权限生效</span><br><span class="line">default：use default options：rw，suid，dev，<span class="built_in">exec</span>，auto，nouser，async，and relatime</span><br></pre></td></tr></table></figure><p><em>一个使用技巧：可以实现将目录绑定至另一个目录上，作为其临时访问入口</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount --<span class="built_in">bind</span> 源目录 目标目录</span><br></pre></td></tr></table></figure><h4 id="查看当前系统所有已挂载的设备"><a href="#查看当前系统所有已挂载的设备" class="headerlink" title="查看当前系统所有已挂载的设备"></a>查看当前系统所有已挂载的设备</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount</span><br><span class="line">cat /etc/mtab</span><br><span class="line">cat /proc/mounts</span><br></pre></td></tr></table></figure><h4 id="挂载光盘"><a href="#挂载光盘" class="headerlink" title="挂载光盘"></a>挂载光盘</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -r /dev/cdrom mount_options</span><br></pre></td></tr></table></figure><p>光盘设备文件：/dev/cdrom，/dev/dvd</p><h4 id="挂载U盘"><a href="#挂载U盘" class="headerlink" title="挂载U盘"></a>挂载U盘</h4><p>实现识别U盘的设备文件</p><h4 id="挂载本地回环设备"><a href="#挂载本地回环设备" class="headerlink" title="挂载本地回环设备"></a>挂载本地回环设备</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mount -o loop /PATH/TO/SOME_LOOP_FILE MOUNT_POINT</span><br><span class="line"></span><br><span class="line"><span class="comment">### umount命令</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">umount device | dir</span><br></pre></td></tr></table></figure><p><em>注意：正在被进程访问到的挂载点无法被卸载</em></p><p><strong>查看被那些进程所占用</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lsof MOUNT_POINT</span><br><span class="line">fuser -v MOUNT_POINT</span><br><span class="line">终止所有正在访问某挂载点的进程</span><br><span class="line">fuser -km MOUNT_POINT</span><br></pre></td></tr></table></figure><h3 id="交换分区的启用和禁用"><a href="#交换分区的启用和禁用" class="headerlink" title="交换分区的启用和禁用"></a>交换分区的启用和禁用</h3><p>创建交换分区的命令：mkswap</p><h4 id="启用swapon"><a href="#启用swapon" class="headerlink" title="启用swapon"></a>启用swapon</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapon [OPTION] [DEVICE]</span><br><span class="line">-a :定义在/etc/fstab文件中的所有swap设备</span><br></pre></td></tr></table></figure><h4 id="禁用swapoff"><a href="#禁用swapoff" class="headerlink" title="禁用swapoff"></a>禁用swapoff</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapoff DEVICE</span><br></pre></td></tr></table></figure><h3 id="设定除根文件系统以外的其他文件系统能够开机时自动挂载：-etc-fstab文件"><a href="#设定除根文件系统以外的其他文件系统能够开机时自动挂载：-etc-fstab文件" class="headerlink" title="设定除根文件系统以外的其他文件系统能够开机时自动挂载：/etc/fstab文件"></a>设定除根文件系统以外的其他文件系统能够开机时自动挂载：/etc/fstab文件</h3><p>每行定义一个要挂载的文件系统及相关属性：<br>6个字段</p><ol><li>要挂载的设备<ul><li>设备文件</li><li>LABEL</li><li>UUID</li><li>伪文件系统：如sysfs，proc，tmpfs</li></ul></li><li>挂载点<ul><li>swap类型的设备挂载点伪swap</li></ul></li><li>文件系统类型</li><li>挂载选项<ul><li>defaults：使用默认挂载选项</li><li>如果要同时指明多个挂载选项，彼此间以逗号隔开；defaults，acl，noatime，noexec</li></ul></li><li>转储频率<ul><li>0：从不备份</li><li>1：每天备份</li><li>2：每隔一天备份</li></ul></li><li>自检次序<ul><li>0：从不自检</li><li>1：首先自检，通常只能是根文件系统可用1</li><li>2：次级自检</li><li>…</li></ul></li></ol><p><em>mount -a ：可自动挂载定义在此文件中的所支持自动挂载的设备</em></p><h2 id="df和du"><a href="#df和du" class="headerlink" title="df和du"></a>df和du</h2><h3 id="df命令"><a href="#df命令" class="headerlink" title="df命令"></a>df命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df [OPTION]...[FILE]...</span><br><span class="line">-l：仅显示本地文件的相关信息</span><br><span class="line">-h：human-readable</span><br><span class="line">-i：显示Inode的使用状态而非blocks</span><br></pre></td></tr></table></figure><h3 id="du命令"><a href="#du命令" class="headerlink" title="du命令"></a>du命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du [OPTION]...[FILE]...</span><br><span class="line">-s：summary</span><br><span class="line">-h：human-readable</span><br></pre></td></tr></table></figure><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p>当创建分区出现该报错时</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WARNING: Re-reading the partition table failed with error 16: Device or resource busy.</span><br><span class="line">The kernel still uses the old table. The new table will be used at</span><br><span class="line">the next reboot or after you run partprobe(8) or kpartx(8)</span><br></pre></td></tr></table></figure><p>重新读取分区表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">partprobe</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux的哲学思想：一切皆文件&quot;&gt;&lt;a href=&quot;#Linux的哲学思想：一切皆文件&quot; class=&quot;headerlink&quot; title=&quot;Linux的哲学思想：一切皆文件&quot;&gt;&lt;/a&gt;Linux的哲学思想：一切皆文件&lt;/h1&gt;&lt;h2 id=&quot;设备类型&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="Linux系统管理" scheme="http://yoursite.com/categories/Linux%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux系统特殊权限</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/Linux%E7%B3%BB%E7%BB%9F%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90/"/>
    <id>http://yoursite.com/Linux基础/Linux系统特殊权限/</id>
    <published>2019-11-18T05:30:00.000Z</published>
    <updated>2019-11-18T10:24:54.258Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux系统上的特殊权限"><a href="#Linux系统上的特殊权限" class="headerlink" title="Linux系统上的特殊权限"></a>Linux系统上的特殊权限</h1><h2 id="特殊权限：SUID，SGID，STICKY"><a href="#特殊权限：SUID，SGID，STICKY" class="headerlink" title="特殊权限：SUID，SGID，STICKY"></a>特殊权限：SUID，SGID，STICKY</h2><h2 id="安全上下文"><a href="#安全上下文" class="headerlink" title="安全上下文"></a>安全上下文</h2><ol><li>进程以某用户的身份运行；进程是发起此进程用户的代理，因此以此用户的身份和权限完成所有操作</li><li>权限匹配模型<ol><li>判断进程的属主，是否为被访问的文件属主；如果是，则应用属主的权限，否则进入第2步</li><li>判断进程的属主，是否属于被访问的文件属组；如果是，则应用属组的权限，否则进入第3步</li><li>应用other的权限</li></ol></li></ol><h2 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h2><p><em>默认情况下：用户发起的进程，进程的属主是其发起者，因此，其以发起者的身份在运行</em><br><strong>SUID的功用</strong>：用户运行某程序时，如果此程序拥有SUID权限，那么程序运行为进程时，进程的属主不是发起者，而是程序文件自己的属主</p><h3 id="管理文件的SUID权限"><a href="#管理文件的SUID权限" class="headerlink" title="管理文件的SUID权限"></a>管理文件的SUID权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+|-s FILE...</span><br></pre></td></tr></table></figure><p><strong>展示位置</strong>：属主的执行权限位，如果属主原本有执行权限，显示为小写s，否则显示为大写S</p><h2 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h2><p><strong>功用</strong>：当目录属组有写权限，且有SGID权限时，那么所有属于此目录的属组，且以属组身份在此目录中新建文件或目录时，新文件的属组不是用户的基本租，而是此目录的属组</p><h3 id="管理文件的SGID权限"><a href="#管理文件的SGID权限" class="headerlink" title="管理文件的SGID权限"></a>管理文件的SGID权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod g+|-s FILE...</span><br></pre></td></tr></table></figure><p><strong>展示位置</strong>：属组的执行权限位，如果属组原本有执行权限，显示为小写s，否则显示为大写S</p><h2 id="Sticky"><a href="#Sticky" class="headerlink" title="Sticky"></a>Sticky</h2><p><strong>功用</strong>：对于属组或全局可写的目录，组内的所有用户或系统上的所有用户对在此目录中都能创建新文件或删除又有的已有文件；如果为此类目录设置Sticky权限，则每个用户能创建新文件，且只能删除自己的文件。</p><h3 id="管理文件的Sticky权限"><a href="#管理文件的Sticky权限" class="headerlink" title="管理文件的Sticky权限"></a>管理文件的Sticky权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod o+|-t FILE...</span><br></pre></td></tr></table></figure><p><strong>展示位置</strong>：其他用户的执行权限位，如果其他用户原本有执行权限，显示为小写t，否则显示为大写T</p><p><em>系统上的/tmp和/var/tmp目录默认均有sticky权限</em></p><h2 id="管理权限的另一方式"><a href="#管理权限的另一方式" class="headerlink" title="管理权限的另一方式"></a>管理权限的另一方式</h2><table><thead><tr><th>suid</th><th align="center">sgid</th><th align="center">sticky</th><th align="center">八进制权限</th></tr></thead><tbody><tr><td>0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr><tr><td>0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr><tr><td>0</td><td align="center">1</td><td align="center">0</td><td align="center">2</td></tr><tr><td>0</td><td align="center">1</td><td align="center">1</td><td align="center">3</td></tr><tr><td>1</td><td align="center">0</td><td align="center">0</td><td align="center">4</td></tr><tr><td>1</td><td align="center">0</td><td align="center">1</td><td align="center">5</td></tr><tr><td>1</td><td align="center">1</td><td align="center">0</td><td align="center">6</td></tr><tr><td>1</td><td align="center">1</td><td align="center">1</td><td align="center">7</td></tr></tbody></table><p>基于八进制方式赋权时，可用于默认的三位八进制数字左侧在加一位八进制数字</p><h1 id="Facl"><a href="#Facl" class="headerlink" title="Facl"></a>Facl</h1><p><strong>facl</strong>:file access control lists，访问控制列表</p><h2 id="文件的额外赋权机制"><a href="#文件的额外赋权机制" class="headerlink" title="文件的额外赋权机制"></a>文件的额外赋权机制</h2><p>在原来的u，g，o之外，另一层让普通用户能控制赋权给另外的用户或组的赋权机制</p><h2 id="getfacl命令"><a href="#getfacl命令" class="headerlink" title="getfacl命令"></a>getfacl命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user:USERNAME:MODE</span><br><span class="line">group:FROUPNAME:MODE</span><br></pre></td></tr></table></figure><h2 id="setfacl命令"><a href="#setfacl命令" class="headerlink" title="setfacl命令"></a>setfacl命令</h2><p><strong>赋权给用户</strong>：setfacl -m u：USERNAME：MODE FILE…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:fedora:rw <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p><strong>赋权给组</strong>：setfacl -m g:GROUPNAME:MODE FILE…<br><strong>撤销赋权</strong>：setfacl -x u:USERNAME FILE… ； setfacl -x g:GROUPNAME FILE…</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux系统上的特殊权限&quot;&gt;&lt;a href=&quot;#Linux系统上的特殊权限&quot; class=&quot;headerlink&quot; title=&quot;Linux系统上的特殊权限&quot;&gt;&lt;/a&gt;Linux系统上的特殊权限&lt;/h1&gt;&lt;h2 id=&quot;特殊权限：SUID，SGID，STICKY
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>文件查找命令</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/Linux基础/文件查找命令/</id>
    <published>2019-11-14T06:30:58.000Z</published>
    <updated>2019-11-14T09:56:22.057Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>文件查找，在文件系统上查找符合条件的文件，实现工具locate，find</p></blockquote><h1 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h1><p><strong>依赖于事先构建好的索引库，该索引库系统自动实现（周期性任务），手动更新数据库（updatedb）</strong></p><h2 id="工作特性"><a href="#工作特性" class="headerlink" title="工作特性"></a>工作特性</h2><ul><li>查找速度快</li><li>模糊查找</li><li>非实时查找</li></ul><h2 id="locate命令"><a href="#locate命令" class="headerlink" title="locate命令"></a>locate命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">locate [OPTION]...PATTERN...</span><br><span class="line">-b <span class="comment">#只匹配路径中的基名</span></span><br><span class="line">-c <span class="comment">#统计出共有多少个符合条件的文件</span></span><br><span class="line">-r <span class="comment">#BRE</span></span><br></pre></td></tr></table></figure><p><em>注意：索引构建过程需要遍历整个根文件系统，极消耗资源</em></p><h1 id="find"><a href="#find" class="headerlink" title="find"></a>find</h1><p><strong>实时查找工具，通过遍历指定起始路径下文件系统层极结构完成文件查找</strong></p><h2 id="工作特性-1"><a href="#工作特性-1" class="headerlink" title="工作特性"></a>工作特性</h2><ul><li>查找速度略慢</li><li>精确查找</li><li>实时查找</li></ul><p>##用法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [OPTIONS] [查找起始路径] [查找条件] [处理动作]</span><br></pre></td></tr></table></figure><ul><li>查找起始路径：指定具体搜索目标起始路径；默认为当前目录</li><li>查找条件：指定的查找标准，可以根据文件名、大小、类型、从属关系、权限等等标准进行，默认为找出指定路径下的所有文件</li><li>处理动作：对符合查找条件的文件做出的操作，例如删除等操作，默认为输出至标准输出</li></ul><h2 id="查找条件"><a href="#查找条件" class="headerlink" title="查找条件"></a>查找条件</h2><p>表达式：选项和测试</p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul><li><p>根据文件名查找**</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-name <span class="string">"pattern"</span></span><br><span class="line">-iname <span class="string">"pattern"</span></span><br><span class="line">支持glob风格的通配符：*,?,[],[^]</span><br><span class="line">-regex pattern：基于正则表达式查找文件，匹配是整个路径，而非其名</span><br></pre></td></tr></table></figure></li><li><p>根据文件从属关系查找</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-user USERNAME ：查找属主指定用户的所有文件</span><br><span class="line">-group GRPNAME ：查找属组指定的GID的所有文件</span><br><span class="line">-uid UID：查找属主指定用户的所有文件</span><br><span class="line">-gid GID：查找属组指定的GID的所有文件</span><br><span class="line">-nouser 查找没有属主的文件</span><br><span class="line">-nogroup 查找没有属组的文件</span><br></pre></td></tr></table></figure></li><li><p>根据文件的类型查找：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">type</span> TYPE:</span><br><span class="line">f ：普通文件</span><br><span class="line">d ：目录文件</span><br><span class="line">i ：符号链接文件</span><br><span class="line">b ：块设备文件</span><br><span class="line">c ：字符设备文件</span><br><span class="line">p ：管道文件</span><br><span class="line">s ：套接字文件</span><br></pre></td></tr></table></figure></li><li><p>组合测试</p><ul><li>与：-a，默认组合逻辑</li><li>或：-o</li><li>非：-not，!</li></ul></li><li><p>根据文件的大小查找</p></li><li><p>size [+|-]#UNIT，常用单位k，M，G，#UNIT：（#-1，#）区间，-#UNIT：（0，#-1）区间，+#UNIT（#，无穷大）</p></li><li><p>根据时间戳查找<br>以“天”为单位：</p><ul><li>-atime[+|-]#<ul><li>#：[#,#-1)</li><li>-#:(#,0]</li><li>+#:(无限大，#-1]</li></ul></li><li>-mtime</li><li>-ctime<br>以“分钟为单位”</li><li>-amin</li><li>-mmin</li><li>-cmin</li></ul></li><li><p>根据权限查找</p><ul><li>-perm [/|-]mode<ul><li>mode：精确权限匹配</li><li>/mode：任何一类用户（u，g，o）的权限中的任何一位（r，w，x）符合条件即满足；9位权限之间存在“或”关系</li><li>-mode：每一类用户（u，g，o）的权限中的每一位（r，w，x）同时符合条件即满足；9位权限之间存在“与”关系</li></ul></li></ul></li><li><p>处理动作</p><ul><li>-print：输出至标准输出；默认的动作；</li><li>-ls：类似于对查找到的文件执行“ls -l”命令，输出文件的详细信息</li><li>-delete：删除查找到的文件</li><li>-fls /PATH/TO/SOMEFILE：把查找到的所有文件的长格式信息保存至指定文件中</li><li>-ok COMMAND {} ;：对查找到的每一个文件执行由COMMAND表示的命令，每次操作都由用户进行确认</li><li>-exec COMMAND {} ;：对查找到的每一个文件执行由COMMAND表示的命令</li></ul></li></ul><p><em>注意：find传递查找到的文件路径至后面的命令时，是先查找出所有符合条件的文件路径，并一次性传递给后面的命令；但是有些命令不能接受过长的阐述，此时命令执行会失败；另一种方式可规避此问题：find | xargs COMMAND</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;文件查找，在文件系统上查找符合条件的文件，实现工具locate，find&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;locate&quot;&gt;&lt;a href=&quot;#locate&quot; class=&quot;headerlink&quot; title=&quot;locate&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>vim编辑器</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/vim%E7%BC%96%E8%BE%91%E5%99%A8/"/>
    <id>http://yoursite.com/Linux基础/vim编辑器/</id>
    <published>2019-11-13T01:53:17.000Z</published>
    <updated>2019-11-14T06:33:50.594Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vim编辑器"><a href="#vim编辑器" class="headerlink" title="vim编辑器"></a>vim编辑器</h1><p><strong>文本编辑器，文本有纯文本、ASCII text、Unicode</strong><br><strong>文本编辑种类</strong></p><ul><li>行编辑器：sed</li><li>全屏编辑器：nano，vi，vim</li></ul><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p><em>模式化的编辑器</em><br><strong>基本模式</strong>：编辑模式，命令模式，输入模式，末行模式（内置的命令行接口）</p><h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim [OPTION]...[FILE...]</span><br><span class="line">+n <span class="comment">#打开文件后，直接让光标处于第n行行首</span></span><br><span class="line">+/PATTERN <span class="comment">#打开文件后，直接让光标处于第一个被PATTERN匹配到的行的行首</span></span><br></pre></td></tr></table></figure><h3 id="模式转换"><a href="#模式转换" class="headerlink" title="模式转换"></a>模式转换</h3><ul><li>编辑模式：默认模式</li></ul><ul><li>编辑模式–&gt;输入模式    <ul><li>i：insert，在光标处输入</li><li>a：append，在光标处后方输入</li><li>o：在光标所在处的下方打开一个新行</li><li>I：在光标所在行的行首输入</li><li>A：在光标所在行的行尾输入</li><li>O：在光标所在处的上方打开一个新行</li></ul></li><li>输入模式–&gt;编辑模式<ul><li>ESC</li></ul></li><li>编辑模式–&gt;末行模式<ul><li>：</li></ul></li><li>末行模式–&gt;编辑模式<ul><li>ESC</li></ul></li></ul><h3 id="关闭文件"><a href="#关闭文件" class="headerlink" title="关闭文件"></a>关闭文件</h3><ul><li>ZZ：保存并退出</li><li>：q 退出</li><li>：q! 强制退出，不保存此前的操作</li><li>：wq 保存并退出</li><li>：x 保存并退出</li><li>：w /PATH/TO/SOMEFILE</li></ul><h3 id="光标跳转"><a href="#光标跳转" class="headerlink" title="光标跳转"></a>光标跳转</h3><p><strong>字符间跳转</strong>：h（向左跳转），l（向右跳转），j（向下跳转），k（向上跳转）</p><p><strong>单词间跳转</strong>：w（下一个单词的词首），e（当前或后一个单词的词尾），b（当前或前一个单词的词首）</p><p><strong>行首行尾跳转</strong></p><ul><li>^：跳转至行首的第一个非空白字符</li><li>0：跳转至行首</li><li>$：跳转至行尾</li></ul><p><strong>行间跳转</strong></p><ul><li>#G：跳转至由#指定的行</li><li>1G，gg：跳转至第一行</li><li>G：跳转至最后一行</li></ul><p><strong>句间跳转</strong></p><ul><li>)</li><li>(</li></ul><p><strong>段间跳转</strong></p><ul><li>{</li><li>}</li></ul><h3 id="翻屏"><a href="#翻屏" class="headerlink" title="翻屏"></a>翻屏</h3><ul><li>Ctrl+f：向文件尾部翻一屏</li><li>Ctrl+b：向文件首部翻一屏</li><li>Ctrl+d：向文件尾部翻半屏</li><li>Ctrl+u：向文件首部翻半屏</li><li>Enter：按行向后翻</li></ul><h3 id="vim的编辑命令"><a href="#vim的编辑命令" class="headerlink" title="vim的编辑命令"></a>vim的编辑命令</h3><ul><li>字符编辑<br>  #x：删除光标所在处开始的#个字符<br>  xp：交换光标所在处的字符与其后面字符的位置</li><li>替换命令<br>  r：替换光标所在处的字符<br>  rCHAR</li><li>删除命令<br>  d：删除命令，可结合光标跳转字符，实现范围删除<pre><code>d$d^dwdedbdd：删除光标所在行</code></pre></li><li>粘贴命令<br>  p：缓冲区中的内容如果为整行，则粘贴在当前光标所在行的下方；否则粘贴至当前光标所在处的后方<br>  P：缓冲区中的内容如果为整行，则粘贴在当前光标所在行的上方；否则粘贴至当前光标所在处的前方</li><li>复制命令<br>  y：复制工作行为相似于d命令</li><li>改变命令<br>  c：编辑模式–&gt;输入模式，实现删除操作<br>  用法同d</li><li>可视化模式<br>  v：按字符选定<br>  V：按行选定<br>  结合命令：d，c，y</li><li>撤销(undo)操作<br>  u：撤销此前的操作，默认可撤销最近50次操作，可结合数量</li><li>撤销此前的撤销操作<br>  Ctrl+r</li><li>重复执行前一个编辑操作<br>  .</li></ul><p><em>vim自带教程 ：vimtutor</em></p><h3 id="vim末行模式"><a href="#vim末行模式" class="headerlink" title="vim末行模式"></a>vim末行模式</h3><p><em>内建的命令行接口</em></p><ol><li>地址定界<ul><li>start_pos[,end_pos]</li><li>#：特定的第#行，例如5即第五行</li><li>.：当前行</li><li>$：最后一行</li><li>#,#：指定行范围，左侧起始行，右侧结束行</li><li>#,+#：指定行范围，左侧为起始行绝对编号，右侧为相对左侧行号的偏移量，例如：3,+7</li><li>%：全文</li><li>/pattern/：光标所在处开始第一次被模式所匹配到的行</li><li>/pat1/,/pat2/：光标所在处开始第一个被pat1所匹配到的行，到第一个被pat2匹配到的行，中间的内容</li><li>可同编辑命令一同使用，实现编辑操作，d，y，c<ul><li>w /PATH/TO/SOMEFILE：将范围内的文本保存至指定的文件中</li><li>r /PATH/FROM/SOMEFILE：将指定的文件中的文本读取并插入至指定位置</li></ul></li></ul></li><li>查找<ul><li>/PATTERN：从当前光标所在处向文件尾部查找能够被当前模式匹配到的所有字符串</li><li>?PATTERN：从当前光标所在处想文件首部查找能够被当前模式匹配到的所有字符串<ul><li>n：下一个，与命令方向相同</li><li>N：上一个，与命令方向相反</li></ul></li></ul></li><li>查找并替换<ul><li>s：末行模式的命令；使用格式：</li><li>s/要查找的内容/替换为的内容/修饰符<ul><li>要查找的内容：可使用正则表达式</li><li>替换为的内容：不能使用正则表达式，但可以引用</li><li>如果“要查找的内容”部分在模式中使用分组符号：在“替换为的内容”中使用后向引用</li><li>直接引用查找模式匹配到的全部文本，使用&amp;符号</li><li>i：忽略大小写</li><li>g：全局替换</li></ul></li><li>分隔符可以用别的非常用符号：s@@@，s###</li><li>示例<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%s@\&lt;t\([[:alpha:]]\+\)\&gt;@T\1@g</span><br><span class="line">%s@\&lt;t[[:alpha:]]\+\&gt;@&amp;er@g</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="vim的多文件功能"><a href="#vim的多文件功能" class="headerlink" title="vim的多文件功能"></a>vim的多文件功能</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim FILE1 FILE2 ...</span><br><span class="line"></span><br><span class="line">文件间切换</span><br><span class="line">:next 下一个</span><br><span class="line">:prev 上一个</span><br><span class="line">:first 第一个</span><br><span class="line">:last 最后一个</span><br><span class="line"></span><br><span class="line">退出所有文件</span><br><span class="line">:wqall 保存所有文件并退出</span><br><span class="line">:wall </span><br><span class="line">:qall</span><br></pre></td></tr></table></figure><ul><li>多窗口<ul><li>-o：水平分割窗口</li><li>-O：垂直分割窗口</li><li>在窗口间切换：Ctrl+w，ARROW</li><li>单个文件也可以分割为多个窗口进行查看<ul><li>Ctrl+w，s：水平分割窗口</li><li>Ctrl+w，v：垂直分割窗口</li></ul></li></ul></li></ul><h3 id="定制vim的工作特性"><a href="#定制vim的工作特性" class="headerlink" title="定制vim的工作特性"></a>定制vim的工作特性</h3><p><em>在末行模式下的设定，仅对当前vim进程有效</em><br><strong>永久有效：全局 /etc/vimrc；个人用户~/.vimrc</strong></p><ol><li>行号<ul><li>显示：set number，简写为set nu</li><li>取消显示：set nomber，简写set nonu</li></ul></li><li>自动缩进<ul><li>启用：set al</li><li>禁用：set noal</li></ul></li><li>高亮搜索<ul><li>启用：set hlsearch</li><li>禁用：set nohlsearch</li></ul></li><li>语法高亮<ul><li>启用：syntax on</li><li>禁用：syntax off</li></ul></li><li>忽略字符大小写<ul><li>启用：set lc</li><li>禁用：set nolc</li></ul></li><li>获取帮助<ul><li>:help</li><li>:help subject</li></ul></li></ol><h3 id="bash脚本编程之算数运算"><a href="#bash脚本编程之算数运算" class="headerlink" title="bash脚本编程之算数运算"></a>bash脚本编程之算数运算</h3><ul><li>算数运算格式<ol><li>let VAR=算数运算表达式</li><li>VAR=$[算数运算表达式]</li><li>VAR=$((算数运算表达式))</li><li>VAR=$(expor $ARG1 $OP $ARG2)</li></ol></li></ul><p><em>注意：乘法符号在有些场景中需要使用转义符</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vim编辑器&quot;&gt;&lt;a href=&quot;#vim编辑器&quot; class=&quot;headerlink&quot; title=&quot;vim编辑器&quot;&gt;&lt;/a&gt;vim编辑器&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;文本编辑器，文本有纯文本、ASCII text、Unicode&lt;/strong&gt;&lt;br&gt;&lt;s
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>shell脚本基础</title>
    <link href="http://yoursite.com/shell%E8%84%9A%E6%9C%AC/shell%E8%84%9A%E6%9C%AC%E5%9F%BA%E7%A1%80/"/>
    <id>http://yoursite.com/shell脚本/shell脚本基础/</id>
    <published>2019-09-18T02:35:00.000Z</published>
    <updated>2019-11-12T13:58:46.331Z</updated>
    
    <content type="html"><![CDATA[<h2 id="bash特性及bash脚本编程初步"><a href="#bash特性及bash脚本编程初步" class="headerlink" title="bash特性及bash脚本编程初步"></a>bash特性及bash脚本编程初步</h2><h3 id="bash的特性"><a href="#bash的特性" class="headerlink" title="bash的特性"></a>bash的特性</h3><pre><code>命令行展开：~,{}命令别名：alias，unalias命令历史：history文件名通配：glob快捷键：Ctrl+a，e，u，k，l命令补全：$PATH路径补全</code></pre><h4 id="bash特性之：命令hash"><a href="#bash特性之：命令hash" class="headerlink" title="bash特性之：命令hash"></a>bash特性之：命令hash</h4><blockquote><p>缓存此前命令的查找结果：key-value（key：搜索键，value：值）</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">hash</span>命令</span><br><span class="line"><span class="built_in">hash</span>：列出</span><br><span class="line"><span class="built_in">hash</span> -d COMMAND：删除</span><br><span class="line"><span class="built_in">hash</span> -r ：请客</span><br></pre></td></tr></table></figure><h4 id="bash的特性之：变量"><a href="#bash的特性之：变量" class="headerlink" title="bash的特性之：变量"></a>bash的特性之：变量</h4><blockquote><p>程序：指令+数据<br>    指令：由程序文件提供<br>    数据：IO设备、文件、管道、变量<br>程序：算法+数据结构<br>变量名+指向的内存空间，变量赋值 name=value，name指向存储value的内存空间<br><strong>变量类型</strong>：存储格式、表示数据范围、参与的运算<br><strong>编程语言</strong>：    强类型变量<br>    弱类型变量：<br>        bash把所有变量统统视作字符类型<br>        bash中的变量无需事先声明，相当于把声明和赋值过程同时实现<br>            声明：类型，变量名<br><strong>变量替换</strong>：把变量名出现的位置替换位其所指向的内存空间中的数据<br><strong>变量引用</strong>：${var_name},$var_name<br><strong>变量名</strong>：变量名只能包含数字、字母和下划线、而且不能以数字开头，见名知义，命名机制遵循某种法则</p></blockquote><h5 id="bash变量类型："><a href="#bash变量类型：" class="headerlink" title="bash变量类型："></a>bash变量类型：</h5><pre><code>本地变量：作用域范围仅为当前shell进程环境变量：作用域为当前shell进程及其子进程局部变量：作用域仅为某代码片段（函数上下文）位置参数变量：当执行脚本的shell进程传递的参数特殊变量：shell内置的有特殊功用的变量    $?： 0，成功；1-255，失败</code></pre><p><strong>本地变量</strong>：</p><ul><li>变量赋值：name-value</li><li>变量引用：${name}，$name</li><li>“”：变量名会替换为其值</li><li>‘’：变量名不会替换为其值</li><li>查看变量：set</li><li>撤销变量：unset name</li></ul><p><strong>环境变量</strong><br><strong>变量赋值</strong></p><ol><li>exprot name=value</li><li>name=value   export name</li><li>declare -x name=vlaue</li><li>name=value   declare -x name</li></ol><p><strong>变量引用</strong>：${name}，$name<br><em>注：bash内嵌了许多环境变量（通常为全大写字符），用于定义bash的工作环境</em><br><del>PAHT,HISTFILE,HISTSIZE,HISTCONTROL,SHELL,HOME,UID,PWD,OLDPWD</del><br><strong>查看环境变量</strong>：export，declare -x ，printenv，env<br><strong>撤销环境变量</strong>：unset name<br><strong>只读变量</strong>：</p><ol><li>declare -r name</li><li>readonly name</li></ol><p><em>注：只读变量无法重新赋值，并且不支持撤销，存活时间为当前shell进程的生命周期，随shell进程终止而终止</em></p><h4 id="bash特性之多命令执行"><a href="#bash特性之多命令执行" class="headerlink" title="bash特性之多命令执行"></a>bash特性之多命令执行</h4><p>COMMAND1;COMMAND2;COMMAND3;….<br>逻辑运算：<br>运算数：<br>真（true，yes，on，1）<br>假（false，no，off，0）<br>与：<br>1 &amp;&amp; 1 = 1<br>1 &amp;&amp; 0 = 0<br>0 &amp;&amp; 1 = 0<br>0 &amp;&amp; 0 = 0<br>或1 || 1 = 1<br>1 || 0 = 1<br>0 || 1 = 1<br>0 || 0 = 0<br>非！1 = 0<br>！0 = 1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMAND1 &amp;&amp; COMMAND2</span><br></pre></td></tr></table></figure><p>COMMAND1为“假”，则COMMAND2不会再执行<br>否则，COMMAND1为“真”，则COMMAND2必须执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">COMMAND1 || COMMAND2</span><br></pre></td></tr></table></figure><p>COMMAND1为“假”，则COMMAND2必须执行<br>否则，COMMAND1为“真”，则COMMAND2不会再执行<br>示例： id $username || useradd $username</p><h3 id="shell脚本编程"><a href="#shell脚本编程" class="headerlink" title="shell脚本编程"></a>shell脚本编程</h3><p><strong>编程语言的分类</strong>：根据运行方式<br>编译运行：源代码-&gt;编译器（编译）-&gt;程序文件<br>解释运行：源代码-&gt;运行时启动解释器，由解释器边解释边运行<br>根据其编程过程中功能的实现是调用库还是调用外部的程序文件：<br><strong>shell脚本编程</strong>：利用系统上的命令及编程组件进行编程<br><strong>完整编程</strong>：利用库编程组件进行编程；<br><strong>编程模型</strong>：过程式编程语言，面向对象的编程语言<br>程序=指令+数据<br>过程式：以指令为中心来组织代码，数据是服务于代码；<br>顺序执行<br>选择执行<br>循环执行<br>对象式：以数据为中心来组织代码，围绕数据来组织指令；<br>类（class）：实例化对象，method<br><strong>shell脚本编程</strong>：过程式编程，解释运行，依赖于外部程序文件运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如何写shell脚本</span><br><span class="line">脚本文件的第一行，顶格：给出shebang，解释器路径，用于指明解释执行当前脚本的解释器程序文件</span><br><span class="line"></span><br><span class="line">常见的解释器：</span><br><span class="line">#!/bin/bash</span><br><span class="line">#!/usr/bin/python</span><br><span class="line">#!/usr/bin/perl</span><br></pre></td></tr></table></figure><p><strong>shell脚本</strong>：命令的堆积；但很多命令不具有幂等性，需要用程序逻辑来判断运行条件是否满足，以避免其运行中发生错误；<br><strong>运行脚本</strong>：</p><ol><li>赋予执行权限，并直接运行此程序文件： chmod +x file </li><li>直接运行解释器，将脚本以命令行参数传递给解释器程序 bash file</li></ol><p><em>注：脚本中的空白行会被解释器忽略；脚本中，除了shebang，余下的所有以#开头的行，都会呗视作注释而被忽略；此即为注释行。shell叫的运行是通过运行一个子shell进程实现的</em></p><p>练习<br>1、显示etc下面的所有p和P开头的文件和文件夹<br>2、把var目录下的所有文件和文件加以大写显示出来<br>3、创建临时文件夹/tmp/file.xxxx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls -d /etc/[pP]*</span><br><span class="line">ls -d /var/* | tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span></span><br><span class="line">mktemp /tmp/file.xxx</span><br></pre></td></tr></table></figure><h4 id="bash的配置文件"><a href="#bash的配置文件" class="headerlink" title="bash的配置文件"></a>bash的配置文件</h4><p><strong>两类</strong>：profile类：为交互式登陆的shell提供配置<br>bashrc类：非交互式登陆的shell进程提供配置<br><strong>登陆类型</strong>：交互式登陆shell进程：<br>直接通过某终端输入账号和密码后登录打开的shell进程<br>使用su命令：su - USERNAME，或者使用 su -l USERNAME执行的登陆切换<br>非交互式登陆shell进程<br>su USERNAME执行的登陆切换<br>图形界面下打开的终端<br>运行脚本<br><strong>profile类</strong>：全局：对所有用户都生效<br>/etc/profile<br>/etc/profild.d/<br>用户个人:仅对当前用户有效</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.bash——profile</span><br></pre></td></tr></table></figure><p><strong>bashrc类</strong>：<strong>全局</strong>：/etc/bashrc<br><strong>用户个人</strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.bashrc</span><br></pre></td></tr></table></figure><p><strong>功用</strong><br>1、定义本地变量<br>2、定义命令别名<br><em>注：仅管理员可以修改全局配置文件</em>    </p><p><strong>交互式登陆shell进程</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile--&gt;/etc/profile.d/*--&gt;~/.bash_profile--&gt;~/.bashrc--&gt;/etc/bashrc</span><br></pre></td></tr></table></figure><p><strong>非交互式登陆shell进程</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.bashrc--&gt;/etc/bashrc--&gt;/etc/profile.d*</span><br></pre></td></tr></table></figure><p>命令行中定义的特性，例如变量和别名作用域为当前shell进程的生命周期<br>配置文件顶的特性，只对随后新启动的shell进程有效</p><p>让通过配置文件定义的特性立即生效：</p><ol><li>通过命令行重复定义一次</li><li>让shell进程重读配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~]# source /PATH/FROM/CONF_FILE</span><br><span class="line">~]# . /PATH/FROM?CONF_FILE</span><br></pre></td></tr></table></figure></li></ol><h4 id="文本处理工具"><a href="#文本处理工具" class="headerlink" title="文本处理工具"></a>文本处理工具</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Linux文本处理三剑客</span><br><span class="line">grep：文本过滤工具（模式：pattern）工具</span><br><span class="line">sed：stream editor，流编辑器；文本编辑工具</span><br><span class="line">awk：Linux上的实现为gawk，文本报告生成器（格式化文本）</span><br></pre></td></tr></table></figure><p><strong>正则表达式：Regual，Expression，REGEXP</strong><br>由一类特殊字符及文本字符所编写的模式，其中有些字符不表示其字面意义，而是用于表示控制或通配的功能；<br>分两类：<br>基本正则表达式：BRE<br>扩展正则表达式：ERE</p><h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><ul><li>作用：文本搜索工具，根据用户指定的“模式（过滤条件）”对目标文件逐行进行匹配检查，打印匹配到的行</li><li>模式：由正则表达式的元字符及文本字符所编写出的过滤条件</li></ul><h5 id="正则表达式引擎"><a href="#正则表达式引擎" class="headerlink" title="正则表达式引擎"></a>正则表达式引擎</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">grep [OPTIONS] PATTERN [FILE...]</span><br><span class="line">grep [OPTIONS] [-e PATTERN | -f FILE] [FILE...]</span><br><span class="line">OPTIONS:</span><br><span class="line">--color=auto <span class="comment">#对匹配到的文本着色后高亮显示</span></span><br><span class="line">-i  <span class="comment">#ignorecase，忽略大小写</span></span><br><span class="line">-o <span class="comment">#仅显示匹配到的字符串本身</span></span><br><span class="line">-v <span class="comment">#显示不能被模式匹配到的内容</span></span><br><span class="line">-E <span class="comment">#支持使用扩展的正则表达式元字符</span></span><br><span class="line">-q <span class="comment">#静默模式，即不输出任何信息</span></span><br><span class="line"></span><br><span class="line">-A N <span class="comment">#after，后N行</span></span><br><span class="line">-B N <span class="comment">#before，前N行</span></span><br><span class="line">-C N <span class="comment">#context，前后各N行</span></span><br></pre></td></tr></table></figure><h5 id="基本正则表达式元字符"><a href="#基本正则表达式元字符" class="headerlink" title="基本正则表达式元字符"></a>基本正则表达式元字符</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">字符匹配：</span><br><span class="line">.：匹配任意字符</span><br><span class="line">[]：匹配指定范围内的任意单个字符</span><br><span class="line">[^]：匹配指定范围外的任意单个字符</span><br><span class="line">[:diglt:]、[:lower:]、[:upper:]、[:alpha:]、[:punct:]、[:space:]</span><br><span class="line">匹配次数：用在指定其出现的次数的字符后面，用于限制其签名字符出现的次数</span><br><span class="line">*：匹配其前面的字符任意次；0,1，多次；</span><br><span class="line">例如：grep &quot;x*y&quot;</span><br><span class="line">.*：匹配任意长度的任意字符</span><br><span class="line">\?：匹配其前面的字符0次或1次：即其前面的字符是可有可无的</span><br><span class="line">\+：匹配其前面的字符1次或多次；即其前面的字符要出现至少1次</span><br><span class="line">\&#123;m\&#125;：匹配其前面字符m次</span><br><span class="line">\&#123;m,n\&#125;：匹配其前面字符至少m次，至多n次；</span><br><span class="line">\&#123;0,n\&#125;：至多n次</span><br><span class="line">\&#123;m,0\&#125;：至少m次</span><br></pre></td></tr></table></figure><p><strong>位置锚定</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">^：行首锚定，用于模式的最左侧</span><br><span class="line">$：行尾锚定。用于模式的最右侧</span><br><span class="line">^PATTERNS：用于PATTERN来匹配整行</span><br><span class="line">^$：空白行</span><br><span class="line">^[[:space:]]*$：空行或包含空白字符的行</span><br><span class="line">单词：非特殊字符组成的连续字符（字符串）都称为单词</span><br><span class="line">\&lt;或\b：词首锚定，用于单词模式的左侧</span><br><span class="line">\&gt;或\b：词尾锚定，用于单词模式的右侧</span><br><span class="line">\&lt;PATTERN\&gt;：匹配完整单词</span><br></pre></td></tr></table></figure><p><strong>分组及引用</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\(\)：将一个或多个字符捆绑在一起当做一个整体进行处理</span><br></pre></td></tr></table></figure><p><em>PS：分组括号中的模式匹配到的内容会被正则表达式引擎自动记录与内部的变量中，这些变量为：<br>    /1：模式从左侧起，第一个左括号以及与之匹配的右括号之间的模式所匹配到的字符<br>    /2：模式从左侧起，第二个左括号以及与之匹配的右括号之间的模式所匹配到的字符<br>    /3<br>    …</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;\(l..e\).*\1&quot; lovers.txt #对比前后是否一致</span><br></pre></td></tr></table></figure><p>后向引用：引用前面的分组括号中的模式所匹配到的字符</p><h5 id="egrep"><a href="#egrep" class="headerlink" title="egrep"></a>egrep</h5><p><strong>支持扩展的正则表达式实现类似于grep文本过滤功能：grep -E</strong></p><p><strong>扩展正则表达式的元字符</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">字符匹配</span><br><span class="line">.：任意单个字符</span><br><span class="line">[]：指定范围内的任意单个字符</span><br><span class="line">[^]:指定范围外的任意单个字符</span><br><span class="line"></span><br><span class="line">次数匹配</span><br><span class="line">*：任意次</span><br><span class="line">?：0次或1次，其前的字符是可有可无的</span><br><span class="line">+：其前字符至少1次</span><br><span class="line">&#123;m&#125;：其前的字符m次</span><br><span class="line">&#123;m,n&#125;：至少m次，至多n次</span><br><span class="line">&#123;0,n&#125;：至多n次</span><br><span class="line">&#123;m,&#125;：至少m次</span><br><span class="line"></span><br><span class="line">位置锚定</span><br><span class="line">^：行首锚定</span><br><span class="line">$：行尾锚定</span><br><span class="line">\&lt;或\b：词首锚定</span><br><span class="line">\&gt;或\b：词尾锚定</span><br><span class="line"></span><br><span class="line">分组及引用</span><br><span class="line">()：分组。括号内的模式匹配到的字符会被记录于正则表达式引擎的内部变量中</span><br><span class="line">后向引用：\1，\2，...</span><br><span class="line">或：</span><br><span class="line">a|b：a或者b； C|cat：C或cat； (c|C)at：cat或Cat；</span><br></pre></td></tr></table></figure><h5 id="fgrep不支持正则表达式元字符"><a href="#fgrep不支持正则表达式元字符" class="headerlink" title="fgrep不支持正则表达式元字符"></a>fgrep不支持正则表达式元字符</h5><p><em>当无需用到元字符去编写模式时，使fgrep必能更好</em></p><h4 id="文本查看及处理工具"><a href="#文本查看及处理工具" class="headerlink" title="文本查看及处理工具"></a>文本查看及处理工具</h4><h5 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h5><p><em>word count,显示行数，单词数，字节数</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wc [OPTION]...[FILE]...</span><br><span class="line">-l <span class="comment">#显示行数</span></span><br><span class="line">-w <span class="comment">#显示字数</span></span><br><span class="line">-c <span class="comment">#显示字节数</span></span><br></pre></td></tr></table></figure><h5 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h5><p><em>截取某几个字段</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cut OPTION...[FILE]...</span><br><span class="line">-d CHAR <span class="comment">#以指定的字符为分隔符</span></span><br><span class="line">-f FIELDS <span class="comment">#挑选出的字段，列 n指定的字段，n-m指n到m字段，n,m指n和m字段</span></span><br></pre></td></tr></table></figure><h5 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h5><p><em>排序</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sort [OPTION]...[FILE]...</span><br><span class="line">-t CHAR <span class="comment">#指定字段分隔符</span></span><br><span class="line">-k n <span class="comment">#用于排序指定的字段</span></span><br><span class="line">-n <span class="comment">#基于数值大小进行排序</span></span><br><span class="line">例：sort -t: -k3 -n /etc/passwd <span class="comment">#表示冒号分隔符的第三个参数来排序</span></span><br><span class="line">-r <span class="comment">#逆序排序</span></span><br><span class="line">-f <span class="comment">#忽略字符大小写</span></span><br><span class="line">-u <span class="comment">#重复的行只保留一份</span></span><br></pre></td></tr></table></figure><h5 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h5><p><em>报告或移除重复的行</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uniq [OPTION]...[INPUT[OUTPUT]]</span><br><span class="line">-c <span class="comment">#显示每行的重复次数</span></span><br><span class="line">-u <span class="comment">#仅显示未曾重复过的行</span></span><br><span class="line">-d <span class="comment">#仅显示曾重复过的行</span></span><br></pre></td></tr></table></figure><h5 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h5><p><em>逐行对比两个文件的不同</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">diff [OPTION]...FILES</span><br><span class="line">diff /PATH/TO/OLDFILE /PATH/TO/NEWFILE &gt; /PAHT/TO/PATCH_FILE</span><br><span class="line">-u <span class="comment">#使用unfied机制，即显示要修改的行的上下文，默认为3行</span></span><br></pre></td></tr></table></figure><h5 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h5><p><em>定向文件打补丁</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path [OPTIONS] -i /PATH/TO/PATCH_FILE /PATH/TO/OLDFILE</span><br><span class="line">pach /PATH/TO/OLDFILE &lt; /PATH/TO/PATCH_FILE</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;bash特性及bash脚本编程初步&quot;&gt;&lt;a href=&quot;#bash特性及bash脚本编程初步&quot; class=&quot;headerlink&quot; title=&quot;bash特性及bash脚本编程初步&quot;&gt;&lt;/a&gt;bash特性及bash脚本编程初步&lt;/h2&gt;&lt;h3 id=&quot;bash的
      
    
    </summary>
    
      <category term="shell脚本" scheme="http://yoursite.com/categories/shell%E8%84%9A%E6%9C%AC/"/>
    
    
  </entry>
  
  <entry>
    <title>用户、组和权限管理</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/%E7%94%A8%E6%88%B7%E3%80%81%E7%BB%84%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/Linux基础/用户、组和权限管理/</id>
    <published>2019-06-25T07:17:10.000Z</published>
    <updated>2019-09-18T02:33:31.658Z</updated>
    
    <content type="html"><![CDATA[<h3 id="etc-passwd：用户的信息库"><a href="#etc-passwd：用户的信息库" class="headerlink" title="/etc/passwd：用户的信息库"></a>/etc/passwd：用户的信息库</h3><blockquote><p>name:passwd:UID:GID:GECOS:directory:shell<br>name：用户名<br>password：可以是加密的密码，也可是占位符x<br>UID：<br>GID：用户所属的主组的ID号<br>GECOS：注释信息<br>directory：用户的家目录<br>shell：用户的默认shell，登录时默认shell程序</p></blockquote><h3 id="etc-shadow：用户密码"><a href="#etc-shadow：用户密码" class="headerlink" title="/etc/shadow：用户密码"></a>/etc/shadow：用户密码</h3><blockquote><p>用户名：加密的密码：最近一次修改密码的时间：最短使用期限：最长使用期限：警告期段：过期期段：保留字段</p></blockquote><h3 id="etc-group：组的信息库"><a href="#etc-group：组的信息库" class="headerlink" title="/etc/group：组的信息库"></a>/etc/group：组的信息库</h3><blockquote><p>group_name：password：GID：user_list<br>uesr_list：该组的用户成员，以此组为附加组的用户的用户列表<br>相关命令：<br><code>useradd,userdel,usermod,passwd,groupadd,groupdel,groupmod,gpasswd,chage,chsh,id,su</code></p></blockquote><h3 id="添加组删除组命令"><a href="#添加组删除组命令" class="headerlink" title="添加组删除组命令"></a>添加组删除组命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupadd [选项] group_name</span><br><span class="line">-g GID <span class="comment">#设置GID，默认是上一个GID+1</span></span><br><span class="line">-n new_name <span class="comment">#修改组名</span></span><br><span class="line">groupdel [选项] GROUP</span><br></pre></td></tr></table></figure><h3 id="创建、删除用户"><a href="#创建、删除用户" class="headerlink" title="创建、删除用户"></a>创建、删除用户</h3><h4 id="useradd命令：添加用户"><a href="#useradd命令：添加用户" class="headerlink" title="useradd命令：添加用户"></a>useradd命令：添加用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">useradd [选项] username</span><br><span class="line">-u, --uid UID:指定UID</span><br><span class="line">-g, --gid GROUP：指定基本组ID，此组需要事先存在</span><br><span class="line">-G, --groups GROUP1[,GROUP2,...[,GROUPN]]：指明用户所属的附加组，多个组之间用逗号分隔</span><br><span class="line">-c, --comment  COMMENT：指明注释信息</span><br><span class="line">-d, --home HOME_DIR：指定的路径为用户的家目录，通过复制/etc/skel此目录并重命名实现，指定的家目录路径如果事先存在，则不会为用户复制环境配置文件</span><br><span class="line">-s, --shell SHELL：指定用户的默认shell，可用的所有shell列表存储在/etc/shells文件中</span><br><span class="line">-r, --system 创建系统用户</span><br></pre></td></tr></table></figure><p><em>注：创建用户时的诸多默认设定配置文件为/etc/login.defs</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd -D：显示创建用户的默认配置</span><br><span class="line">useradd -D 选项 ：修改默认选项的值：</span><br><span class="line"><span class="comment"># 修改的结果保存于/etc/default/useradd文件中；</span></span><br></pre></td></tr></table></figure><h4 id="usermod命令：修改用户属性"><a href="#usermod命令：修改用户属性" class="headerlink" title="usermod命令：修改用户属性"></a>usermod命令：修改用户属性</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">usermod [选项] 登录</span><br><span class="line">-u, --uid UID：修改用户的ID为此处指定的新UID</span><br><span class="line">-g, --gid GROUP：修改用户所属的基本组</span><br><span class="line">-G, --groups GROUP1[,GROUP2,...[,GROUPN]]：修改用户所属的附加组，原来的附加组会被覆盖</span><br><span class="line">-a, --append：与-G一同使用，用于为用户追加新的附加组</span><br><span class="line">-c, --comment  COMMENT：修改注释信息</span><br><span class="line">-d, --home HOME_DIR：修改用户的家目录，用户文件不会移动到新目录</span><br><span class="line">-m, --move-home：只能与-d一同使用，将原来家目录移动为新的家目录</span><br><span class="line">-s, --shell：修改用户默认shell</span><br><span class="line">-L, --lock：锁定用户密码</span><br><span class="line">-U, --unlock：解锁用户密码</span><br></pre></td></tr></table></figure><h4 id="userdel命令：删除用户"><a href="#userdel命令：删除用户" class="headerlink" title="userdel命令：删除用户"></a>userdel命令：删除用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userdel [选项] 登录</span><br><span class="line">-r： 删除用户时一并删除其家目录</span><br></pre></td></tr></table></figure><h4 id="passwd命令"><a href="#passwd命令" class="headerlink" title="passwd命令"></a>passwd命令</h4><ol><li>passwd：修改用户自己的密码</li><li>passwd UESRNAME：修改指定用户的密码，但仅有root有此权限</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-l,-u <span class="comment">#锁定和解锁用户</span></span><br><span class="line">-d <span class="comment">#清除用户密码串</span></span><br><span class="line">-e DATE <span class="comment">#过期期限，日期</span></span><br><span class="line">-i DAYS <span class="comment">#非活动期限</span></span><br><span class="line">-n DAYS <span class="comment">#密码的最短使用期限</span></span><br><span class="line">-x DAYS <span class="comment">#密码的最长使用期限</span></span><br><span class="line">-w DAYS <span class="comment">#警告期限</span></span><br><span class="line">--stdin <span class="comment"># echo "PASSWORD" | passwd -stdin USERNAME</span></span><br></pre></td></tr></table></figure><h4 id="gpasswd命令"><a href="#gpasswd命令" class="headerlink" title="gpasswd命令"></a>gpasswd命令</h4><p>组密码文件：/etc/gshedow</p><p>gpasswd [选项] group<br>    -a USERNAME：向组中添加用户<br>    -d USERNAME：从组中移除用户</p><h4 id="newgrp命令：临时切换指定的组为基本组"><a href="#newgrp命令：临时切换指定的组为基本组" class="headerlink" title="newgrp命令：临时切换指定的组为基本组"></a>newgrp命令：临时切换指定的组为基本组</h4><p>newgrp [-] [group]<br>    -：会模拟用户重新登录以实现重新初始化其工作环境：</p><h4 id="chage命令：更改用户名密码过期信息"><a href="#chage命令：更改用户名密码过期信息" class="headerlink" title="chage命令：更改用户名密码过期信息"></a>chage命令：更改用户名密码过期信息</h4><p>chage [选项] 登录名<br>    -d<br>    -E<br>    -W<br>    -m<br>    -M</p><h4 id="id命令：显示用户的真实有效ID"><a href="#id命令：显示用户的真实有效ID" class="headerlink" title="id命令：显示用户的真实有效ID"></a>id命令：显示用户的真实有效ID</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id [option]...[user]</span><br><span class="line">-u <span class="comment">#仅显示有效的UID</span></span><br><span class="line">-g <span class="comment">#仅显示用户的基本组ID</span></span><br><span class="line">-G <span class="comment">#仅显示用户所属的所有组的ID</span></span><br><span class="line">-n <span class="comment">#显示名字而非ID</span></span><br></pre></td></tr></table></figure><h4 id="su命令：switch-user"><a href="#su命令：switch-user" class="headerlink" title="su命令：switch user"></a>su命令：switch user</h4><p>登录式切换：会通过读取目标用户的配置文件来重新初始化<br>    su - USERNAME<br>    su -l USERNAME<br>非登录式切换：不会读取目标用户的配置文件进行初始化<br>    su USERNAME<br><em>注意：管理员可无密码切换至其他任何用户</em><br>    -c ‘COMMAND’ :仅以指定用户的身份运行此处指定的命令</p><p>其他命令：chsh，chfn，finger，whoami</p><blockquote><p>命令总结：groupadd，groupmod，groupdel，useradd，usermod，userdel，passwd，gpasswd，newgrp，id，su</p></blockquote><h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><h4 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h4><ul><li><p>r：readable，读</p></li><li><p>w：writable，写</p></li><li><p>x：excutable，执行</p><p>  文件</p><pre><code>* r：可获取文件数据* w：可修改文件的数据* x：可将此文件运行为进行</code></pre><p>  目录</p><pre><code>* r：可使用ls命令获取其下的所有文件列表* w：可修改此目录下的文件列表，即创建或删除文件* x：可cd至此目录中，且可使用ls -l来获取所有文件的详细属性信息</code></pre><p>权限组合机制</p><ul><li>— 000 0</li><li>–x 001 1</li><li>-w- 010 2</li><li>-wx 011 3</li><li>r– 100 4</li><li>r-x 101 5</li><li>rw- 110 6</li><li>rwx 111 7</li></ul></li></ul><h3 id="权限管理命令"><a href="#权限管理命令" class="headerlink" title="权限管理命令"></a>权限管理命令</h3><h4 id="chmod命令"><a href="#chmod命令" class="headerlink" title="chmod命令"></a>chmod命令</h4><ol><li>chmod [OPTION]… MODE[,MODE]…FILE…<br>三类用户：u（属主）g（属组）o（其他）a（所有）<br> MODE表示法：<pre><code>赋权表示法：直接操作一类用户的所有权限位    u=    g=    o=    a=授权表示法：直接操作一类用户的一个权限位r，w，x    u+，u-    g+，g-    o+，o-    a+，a-</code></pre></li><li>chmod [OPTION] … OCTAL-MODE FILE… 八进制表示法</li><li>chmod [OPTION] … –reference=RFILE FILE…<br>选项：<br> -R，–recursive：递归修改</li></ol><h4 id="从属关系管理命令：chown，chgrp"><a href="#从属关系管理命令：chown，chgrp" class="headerlink" title="从属关系管理命令：chown，chgrp"></a>从属关系管理命令：chown，chgrp</h4><p>1.chown命令：<br>    chown [OPTION] … [OWNER][:[GROUP]] FILE …<br>    chown [OPTION] … –reference=RFILE FILE …<br>    选项：<br>        -R：递归修改<br><em>注：用户对目录有写权限，对目录下的文件没有写权限，则不能修改该文件，可以删除该文件</em><br><strong>只有ROOT可以修改文件的属组属主</strong></p><h4 id="umask：文件的权限反向掩码，遮罩码"><a href="#umask：文件的权限反向掩码，遮罩码" class="headerlink" title="umask：文件的权限反向掩码，遮罩码"></a>umask：文件的权限反向掩码，遮罩码</h4><pre><code>文件：    666-umask目录：    777-umask</code></pre><p><em>注：之所以文件用666去减，表示文件默认不能拥有执行权限，如果减得的结果中有执行权限，则需要将其加1</em><br><strong>umask命令</strong><br>    umask：查看当前umask<br>    umask MASK ：设置umask<br><em>注：此类设定仅对当前shell进程有效</em></p><h4 id="install命令"><a href="#install命令" class="headerlink" title="install命令"></a>install命令</h4><pre><code>install - copy files and set attributes单源复制    install [OPTION] ... [-T] SOURCE DEST多源复制    install [OPTION] ... SOURCE ... DIRECTORY    install [OPTION] ... -t DIRECTORY SOURCE ...创建目录：    install [OPTION] ... -d DIRECTORY常用选项：    -m，--mode=MODE：设定目标文件权限，默认为755：    -o，--owner=OWMER：设定目标文件属主    -g，--group=GROUP：设定目标文件属组</code></pre><h4 id="mktemp命令"><a href="#mktemp命令" class="headerlink" title="mktemp命令"></a>mktemp命令</h4><pre><code>mktemp - create a temporary file or directorymktemp [OPTION] ... [TEMPLATE]    常用选项：        -d：创建临时目录</code></pre><p><em>注意：mktemp将会创建的临时文件名直接返回，因此，可直接通过命令引用保存起来</em></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;etc-passwd：用户的信息库&quot;&gt;&lt;a href=&quot;#etc-passwd：用户的信息库&quot; class=&quot;headerlink&quot; title=&quot;/etc/passwd：用户的信息库&quot;&gt;&lt;/a&gt;/etc/passwd：用户的信息库&lt;/h3&gt;&lt;blockquote
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>bash的基础特性</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/bash%E7%9A%84%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7/"/>
    <id>http://yoursite.com/Linux基础/bash的基础特性/</id>
    <published>2019-06-24T08:42:07.000Z</published>
    <updated>2019-07-19T03:07:29.551Z</updated>
    
    <content type="html"><![CDATA[<h3 id="bash的基础特性"><a href="#bash的基础特性" class="headerlink" title="bash的基础特性"></a>bash的基础特性</h3><h4 id="命令历史"><a href="#命令历史" class="headerlink" title="命令历史"></a>命令历史</h4><p>shell进程会在其会话中保存此前用户提交执行过的命令<br><code>history</code><br>定制history的功能，可通过环境变量实现：<br>    <strong>HISTSIZE</strong>：shell进程可保留的命令历史的条数<br>    <strong>HISTFILE</strong>：持久保存命令历史的文件，家目录下的.bash_history文件<br>    <strong>HISTFILESIZE</strong>：定义文件最多保存多少条命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> -c <span class="comment">#清空命令历史</span></span><br><span class="line"><span class="built_in">history</span> -d offset <span class="comment">#删除指定历史命令</span></span><br><span class="line"><span class="built_in">history</span> -w <span class="comment">#使用命令将内存命令，写入文件中</span></span><br><span class="line"><span class="built_in">history</span> -r <span class="comment">#把历史命令从内存文件中读到内存中</span></span><br><span class="line"><span class="built_in">history</span> <span class="comment"># #显示最近的#条命令</span></span><br></pre></td></tr></table></figure><p><strong>调用命令历史列表中的命令</strong><br>    <strong>!#</strong>：再一次执行历史列表的第#条命令<br>    <strong>!!</strong>：再一次执行上一条命令<br>    <strong>!STRING</strong>：再一次执行命令历史列表中最近一个以STRING开头的命令<br>    <em>注意：命令的重复执行有时候需要依赖于幂等性</em></p><p><strong>调用上一条命令的最后一个参数</strong>：    快捷键：ESC<br>    字符串：!$</p><h4 id="控制命令历史记录的方式："><a href="#控制命令历史记录的方式：" class="headerlink" title="控制命令历史记录的方式："></a>控制命令历史记录的方式：</h4><p><strong>环境变量HISTCONTROL</strong><br>    ignoredups：忽略重复的命令<br>    ignorespace：忽略以空白字符开头的命令<br>    ignoreboth：以上两者同时生效<br><strong>修改变量的值</strong>：    NAME=’VALUE’</p><h4 id="命令补全功能"><a href="#命令补全功能" class="headerlink" title="命令补全功能"></a>命令补全功能</h4><p><strong>shell程序在接收到用户执行命令的请求，分析完成之后，最左侧的字符串会被当做命令</strong><br><strong>命令处理机制</strong><br>查找内部命令：根据PATH环境变量中设定的目录，自左而右逐个搜索目录下的文件名</p><h4 id="目录管理类的命令"><a href="#目录管理类的命令" class="headerlink" title="目录管理类的命令"></a>目录管理类的命令</h4><p><strong>mkdir创建目录</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir [options]...DIRECTORY...</span><br><span class="line">-p <span class="comment">#自动按需创建父目录</span></span><br><span class="line">-v <span class="comment">#verbose，显示详细过程</span></span><br><span class="line">-m <span class="comment">#MODE：直接给定权限</span></span><br></pre></td></tr></table></figure><h4 id="命令行展开"><a href="#命令行展开" class="headerlink" title="命令行展开"></a>命令行展开</h4><p><strong>~</strong>：自动展开为用户的家目录，或指定的用户的家目录<br><strong>{}</strong>：可承载一个以逗号分隔的路径列表，并能够将其展开为多个路径<br>例如：/tmp/{a,b}相当于、/tmp/a /tmp/b</p><h4 id="tree命令"><a href="#tree命令" class="headerlink" title="tree命令"></a>tree命令</h4><p><code>tree [option] directory</code><br>    -L level:指定要显示的层级</p><h4 id="命令的执行状态结果"><a href="#命令的执行状态结果" class="headerlink" title="命令的执行状态结果"></a>命令的执行状态结果</h4><p> 命令的执行状态结果，bash通过状态返回值来输出此结果：<br>     成功：0<br>     失败：1-255<br>命令执行完成之后其状态返回值保存于bash的特殊变量$?中</p><p><em>注：命令正常执行时，有的返回有明朗返回值：根据命令及其功能不同，结果各不相同</em></p><p><strong>引用命令的执行结果</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(COMMAND) 或 `COMMAND`</span><br><span class="line">引用，强引用 <span class="string">''</span> 弱引用 <span class="string">""</span> 命令引用 ``</span><br></pre></td></tr></table></figure><p><strong>快捷键</strong><br><code>ctrl+a：跳转至命令行行首</code><br><code>ctrl+e：跳转至命令行行尾</code><br><code>ctrl+u：删除行首至光标所在处之间的所有字符</code><br><code>ctrl+k：删除光标所在处至行尾的所有字符</code><br><code>ctrl+l：清屏，相当于clear</code></p><h4 id="文件查看类命令"><a href="#文件查看类命令" class="headerlink" title="文件查看类命令"></a>文件查看类命令</h4><p><code>cat,tac,head,tail,more,less</code><br><strong>head命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">head [options] FILE</span><br><span class="line">-n * <span class="comment">#查看前n行</span></span><br><span class="line">-* <span class="comment">#同上</span></span><br></pre></td></tr></table></figure><p><strong>tail命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tail [options] FILE</span><br><span class="line">-n * <span class="comment">#查看后n行</span></span><br><span class="line">-* <span class="comment">#同上</span></span><br><span class="line">-f <span class="comment">#查看文件尾部内容结束后不退出，跟随显示新增内容</span></span><br></pre></td></tr></table></figure><p><strong>stat命令</strong><br>显示文件或文件系统的状态</p><p><strong>文件包含两类数据</strong><br>元数据：metadata，属性，特性<br>数据：data，真实文件数据内容</p><blockquote><p>stat所看到是数据就是元数据</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> FILE</span><br><span class="line"></span><br><span class="line">  File: ‘anaconda-ks.cfg’</span><br><span class="line">  Size: 1579            Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768d    Inode: 33583811    Links: 1</span><br><span class="line">Access: (0600/-rw-------)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: system_u:object_r:admin_home_t:s0</span><br><span class="line">Access: 2019-06-21 00:05:40.458988944 +0800 <span class="comment">#最近访问</span></span><br><span class="line">Modify: 2019-06-21 00:05:40.461988944 +0800 <span class="comment">#最近更改</span></span><br><span class="line">Change: 2019-06-21 00:05:40.461988944 +0800 <span class="comment">#最近改动</span></span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure><p><strong>touch</strong><br>用来改变文件的时间戳</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">touch [options] FILE</span><br><span class="line">-a <span class="comment">#修改access time</span></span><br><span class="line">-m <span class="comment">#修改modify time</span></span><br><span class="line">-c <span class="comment">#指定文件不存在时，不创建文件</span></span><br><span class="line">-t STAMP [[CC]YY]MMDDhhmm[.ss] <span class="comment">#修改时间为指定时间</span></span><br><span class="line">touch -m -t 1906250000.00 FILE</span><br></pre></td></tr></table></figure><p><em>注：touch不能修改Change time</em></p><h4 id="文件管理工具"><a href="#文件管理工具" class="headerlink" title="文件管理工具"></a>文件管理工具</h4><p><code>cp,mv,rm</code><br><strong>cp命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -r SOURCE DEST <span class="comment">#递归复制目录</span></span><br><span class="line">-d <span class="comment">#复制符号链接文件本身，而非其指向的源文件</span></span><br></pre></td></tr></table></figure><h4 id="cp命令"><a href="#cp命令" class="headerlink" title="cp命令"></a>cp命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-i <span class="comment">#交互式复制，即覆盖之前提醒用户确认</span></span><br><span class="line">-f <span class="comment">#强制覆盖目标文件</span></span><br><span class="line">-r ，-R <span class="comment">#递归复制目录</span></span><br><span class="line">-d <span class="comment">#复制符号链接文件本身，而非其指向的源文件</span></span><br><span class="line">-a <span class="comment">#-dR --preserve=all，archive，用于实现归档，保留源文件所有属性（备份）</span></span><br><span class="line">--preserv=</span><br><span class="line">mode <span class="comment">#权限</span></span><br><span class="line">ownership <span class="comment">#属主和属组</span></span><br><span class="line">timestamps <span class="comment">#时间戳</span></span><br><span class="line">context <span class="comment">#安全标签</span></span><br><span class="line">xattr <span class="comment">#扩展属性</span></span><br><span class="line">links <span class="comment">#符号链接</span></span><br><span class="line">all <span class="comment">#上述所有属性</span></span><br></pre></td></tr></table></figure><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p><strong>命名的内存空间</strong><br>变量类型<br>    字符型<br>    数值型<br>        精确数值<br>        近似数值<br>    存储格式、数据范围、参与运算</p><p>变量赋值操作<br>    name=tom</p><h4 id="globbing文件名通配"><a href="#globbing文件名通配" class="headerlink" title="globbing文件名通配"></a>globbing文件名通配</h4><p><em>注：整体文件名匹配，而非部分</em></p><p><strong>匹配模式</strong><br>元字符<br>    <code>*：匹配任意长度的任意字符</code><br>    <code>pa*,*pa*,*pa,*p*a*</code><br>    <code>?：匹配任意单个字符</code><br>    <code>pa?,??pa,p?a,p?a?</code><br>    <code>[]：匹配指定范围内的任意单个字符</code><br>    <code>有几种特殊格式：[a-z],[A-Z],[0-9],[a-z0-9]</code><br>    <code>[[:upper:]]：所有大写字母</code><br>    <code>[[:lower:]]：所有小写字母</code><br>    <code>[[:alpha:]]：所有字母</code><br>    <code>[[:digit:]]：所有数字</code><br>    <code>[[:alnum:]]：所有字母和数字</code><br>    <code>[[:space:]]：所有空白字符</code><br>    <code>[[:punct:]]：所有标点符号</code><br>    <code>[^]:匹配指定范围外的任意单个字符[^0-9],[^[:upper:]]</code></p><p><em>注：文件名通配时不区分大小写</em></p><h4 id="IO重定向及管道"><a href="#IO重定向及管道" class="headerlink" title="IO重定向及管道"></a>IO重定向及管道</h4><p><strong>程序的数据流有三种</strong><br>    输入的数据流：&lt;–标准输入（stdin），键盘<br>    输出的数据流：–&gt;标准输出（stdout），显示器<br>    错误输出流：–&gt;错误输出（stderr），显示器<br><strong>fd：file descriptor，文件描述符</strong><br>    标准输入：0<br>    标准输出：1<br>    错误输出：2<br><strong>IO重定向</strong><br>    <code>覆盖输出重定向：&gt;</code><br>    <code>追加输出重定向：&gt;&gt;</code><br>    <code>set -C #禁止覆盖输出重定向至已存在的文件，此时可使用强制覆盖输出：&gt;|</code><br>    <code>set +C 关闭上述特性</code><br>    <code>输入重定向：&lt;</code></p><p><strong>tr命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tr [options]...SET1[SET2] <span class="comment">#把输入的数据当中的字符，凡是在SET1定义范围内出现的，通通对位转换为SET2出现的字符</span></span><br><span class="line">用法1：</span><br><span class="line">tr SET1 SET2 &lt; /PATH/FROM/SOMEFILE</span><br><span class="line">用法2：</span><br><span class="line">tr -d SET1 &lt; /PATH/FROM/SOMEFILE</span><br></pre></td></tr></table></figure><p><strong>管道</strong><br>链接程序，实现将前一个命令的输出直接定向后一个程序当做输入</p><p><strong>tee</strong><br>把前一个命令的结果分为两个流，一个保存到文件中，一个送往后一个命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COMMAND | tee /PATH/TO/SOMEFILE</span><br><span class="line">cat passwd |tee ./clx.yum.log|tr [a-z] [A-Z]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;bash的基础特性&quot;&gt;&lt;a href=&quot;#bash的基础特性&quot; class=&quot;headerlink&quot; title=&quot;bash的基础特性&quot;&gt;&lt;/a&gt;bash的基础特性&lt;/h3&gt;&lt;h4 id=&quot;命令历史&quot;&gt;&lt;a href=&quot;#命令历史&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Linux常用命令</title>
    <link href="http://yoursite.com/Linux%E5%9F%BA%E7%A1%80/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/Linux基础/Linux常用命令/</id>
    <published>2019-06-24T01:54:26.000Z</published>
    <updated>2019-06-24T08:41:04.114Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span> <span class="comment">#显示工作目录</span></span><br><span class="line"><span class="built_in">cd</span>  <span class="comment">#change directory</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PWD</span> <span class="comment">#当前工作目录环境变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$OLDPWD</span> <span class="comment">#上次的工作目录环境变量</span></span><br><span class="line">ls <span class="comment">#列出指定目录下的内容</span></span><br><span class="line">ls -ld 目录 <span class="comment">#查看目录自身属性</span></span><br><span class="line">cat -n <span class="comment">#文本文件查看,-n表示给文本文件添加行编号</span></span><br><span class="line">tac <span class="comment">#同上，但是逆序显示</span></span><br><span class="line">file <span class="comment">#查看文件类型</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="comment">#让转义符生效，例如\n换行</span></span><br><span class="line">shutdown <span class="comment">#关机 -h 关机 -r 重启</span></span><br><span class="line">shutdown -c <span class="comment">#取消关机</span></span><br><span class="line">wall <span class="comment">#向所有人的终端发送消息</span></span><br></pre></td></tr></table></figure><h3 id="ls-l结果"><a href="#ls-l结果" class="headerlink" title="ls -l结果"></a>ls -l结果</h3><blockquote><p>-rw-r–r–   1 root     root          85374 Jun 23 19:06 dump.rdb</p></blockquote><p><strong>-</strong>:文件类型，-，d，b，c，l，s，p<br><strong>rw-</strong>：文件属主的权限<br><strong>r–</strong>：文件属组的权限<br><strong>r–</strong>：其他用户（非属主、属组）的权限<br><strong>1</strong>：表示硬链接次数<br><strong>root</strong>：文件属主<br><strong>root</strong>：文件属组<br><strong>85374</strong>：表示文件的大小，单位字节<br><strong>Jun 23 19:06</strong>：文件最后一次被修改的时间<br><strong>dump.rdb</strong>：文件名</p><h4 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h4><p>-：常规文件，即f<br>d：directory，目录文件<br>b：block device，块设备文件，支持以“block”为单位进行随机访问<br>c：character device，字符设备文件，支持以“character”为单位进行线性访问<br>    major number：主设备号，用于识别设备类型，进而确定要加载的驱动程序<br>    minor number：次设备号，用于标识同一类型中的不同的设备<br>l：符号链接文件，类似快捷方式<br>p：pipe，命名管道<br>s：socket，套接字文件</p><h3 id="echo-OPTION-…-STRING-…"><a href="#echo-OPTION-…-STRING-…" class="headerlink" title="echo [OPTION]…[STRING]…"></a>echo [OPTION]…[STRING]…</h3><p>STRING可以使用引号，’’、””<br>单引号：强引用，变量引用不执行替换<br>双引号：弱引用，变量引用执行替换</p><h3 id="日期相关的命令"><a href="#日期相关的命令" class="headerlink" title="日期相关的命令"></a>日期相关的命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">date [OPTION]... [+FORMAT] <span class="comment">#显示时间 </span></span><br><span class="line">date +%F 显示日期 +%H 显示小时 +%T 显示准确时间 <span class="comment"># Y年 m月 d日 H时 M分 S秒 s从1970.1.1日0点0分0秒到现在经过多少秒</span></span><br><span class="line">date [MMDDhhmm[[CC]YY][.ss]] <span class="comment">#设定日期时间</span></span><br><span class="line">date 101008082013.08 <span class="comment">#设定日期2013年10月10日8点8分8秒</span></span><br><span class="line">clock，hwclock <span class="comment">#显示硬件时钟 -s 把硬件时间设置为系统时间 -w 把系统时间设置为硬件时间</span></span><br><span class="line">cal 2019 <span class="comment">#日历指定月份年份</span></span><br></pre></td></tr></table></figure><h3 id="FHS-Filesystem-Hierarchy-Standard"><a href="#FHS-Filesystem-Hierarchy-Standard" class="headerlink" title="FHS:Filesystem Hierarchy Standard"></a>FHS:Filesystem Hierarchy Standard</h3><pre><code>/bin：所有用户可用的基本命令程序文件/sbin：供系统管理使用的工具程序/boot：引导加载器必须用到的各静态文件：kernel，initramfs(initrd),grub等/dev：存储特殊文件或设备文件：设备文件有两种类型：字符设备（线性设备）、块设备（随机设备）/etc：系统程序的配置文件，只能为静态/home：普通用户的家目录的集中位置，一般每个普通用户的家目录默认为此目录下与用户名同名的子目录，/home/USERNAME/root：管理员的家目录/lib：为系统启动或根文件系统上的应用程序（/bin,/sbin等）提供共享库，以及为内核提供内核模块    libc.so.*：动态链接C库    ld*：运行时链接器/加载器    modules：用于存储内核模块的目录/lib64:64位系统特有的存放64位共享库路径/media：便携式设备挂载点，cdrom，floppy等：/mnt：其它文件系统的临时挂载点/opt：附加应用程序的安装位置：可选路径：/srv：当前主机为服务提供的数据/tmp：为那些会产生临时文件的程序提供用于存储临时文件的目录，可供所有用户执行写入操作，有特殊权限/usr：全局共享的只读数据路径    bin，sbin    lib，lib64/usr/local：让系统管理员安装本地软件/var：存储经常发生变化的数据目录/proc：内核及进程存储其相关信息，它们多为内核参数，例如net.ipv4.ip_forward,虚拟为net/ipv4/ip_forward,存储于/proc/sys/，因此其完整路径为/proc/sys/net/ipv4/ip_forward/sys：sysfs虚拟文件系统提供了一种比proc更为理想的访问内核数据的途径：其主要作用在于为管理Linux设备提供一种统一模型的接口</code></pre><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><h4 id="命令类型"><a href="#命令类型" class="headerlink" title="命令类型"></a>命令类型</h4><p><strong>外部命令</strong><br><strong>内部命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> COMMAND</span><br><span class="line"><span class="comment">#内部：builtin</span></span><br><span class="line"><span class="comment">#外部：显示为命令文件路径</span></span><br></pre></td></tr></table></figure><p><em>注意：命令可以有别名，别名可以与原名相同，此时原名被隐藏，此时如果要运行原命令，则使用\COMMAND</em></p><p><strong>命令别名</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> <span class="comment">#获取所有可用别名的定义</span></span><br><span class="line"><span class="built_in">alias</span> NAME=<span class="string">'COMMAND'</span> <span class="comment">#定义别名</span></span><br><span class="line"><span class="built_in">unalias</span> NAME <span class="comment">#撤销别名</span></span><br></pre></td></tr></table></figure><p><em>注意：仅对当前shell进程有效</em></p><h4 id="which命令"><a href="#which命令" class="headerlink" title="which命令"></a>which命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wihick [options] programename</span><br><span class="line">--skip-alias:忽略别名</span><br></pre></td></tr></table></figure><h4 id="whereis命令"><a href="#whereis命令" class="headerlink" title="whereis命令"></a>whereis命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">whereis [options] name</span><br><span class="line">-b:仅搜索二进制程序路径</span><br><span class="line">-m：仅搜索使用手册文件路径</span><br></pre></td></tr></table></figure><h4 id="who命令"><a href="#who命令" class="headerlink" title="who命令"></a>who命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">who [options]</span><br><span class="line">-b：系统此次启动的时间：</span><br><span class="line">-r：运行级别</span><br></pre></td></tr></table></figure><p>who查看目前谁登陆了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre
      
    
    </summary>
    
      <category term="Linux基础" scheme="http://yoursite.com/categories/Linux%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
</feed>
